{"version":3,"sources":["webpack:///./src/mirador-config.js","webpack:///./src/plugins/layersCurtain/companionWindowPlugin/item.js","webpack:///./src/plugins/layersCurtain/companionWindowPlugin/list.js","webpack:///./src/plugins/layersCurtain/state/reducers.js","webpack:///./src/plugins/layersCurtain/companionWindowPlugin/index.js","webpack:///./src/plugins/layersCurtain/state/actions.js","webpack:///./src/plugins/util.js","webpack:///./src/plugins/layersCurtain/windowSideBarButtonPlugin.js","webpack:///./src/plugins/layersCurtain/openSeadragonViewerPlugin.js","webpack:///./src/plugins/layersCurtain/index.js","webpack:///./src/plugins/physicalRuler/CanvasNavigationControls.js","webpack:///./src/plugins/physicalRuler/constants.js","webpack:///./src/plugins/physicalRuler/DocumentRuler.js","webpack:///./src/plugins/physicalRuler/RulerWrapper.js","webpack:///./src/plugins/index.js","webpack:///./src/plugins/physicalRuler/index.js","webpack:///./src/components/header.js","webpack:///./src/components/footer.js","webpack:///./src/components/onboarding.js","webpack:///./src/index.js"],"names":["id","windows","selectedTheme","themes","fitzwilliam","palette","type","primary","main","shades","dark","window","sideBarOpen","allowClose","defaultSideBarPanel","allowTopMenuButton","allowFullscreen","allowMaximize","panels","info","attribution","canvas","annotations","search","layers","workspace","showZoomControls","workspaceControlPanel","enabled","translations","en","openCompanionWindow_LayersCurtain","addManifestUrlHelp","requests","postprocessors","url","action","json","replace","catalog","imageStyle","paddingRight","dragHandleWrapperStyle","display","backgroundColor","alignItems","borderRight","contentWrapperStyle","padding","width","itemDetailStyle","ListItem","props","handleclipChange","bind","layerId","value","this","canvasId","layersOpacityReset","updateLayersCurtain","windowId","clip","render","layer","resource","index","toggleLayerVisibility","moveToTop","IIIFThumbnail","maxHeight","undefined","maxWidth","style","MiradorMenuButton","size","aria-label","onClick","key","draggableId","provided","snapshot","ref","innerRef","draggableProps","isDragging","draggableStyle","userSelect","background","borderBottom","dragHandleProps","label","visibility","Slider","disabled","onChange","e","Component","reorder","list","startIndex","endIndex","result","Array","from","removed","splice","orientationStyle","paddingLeft","listStyle","height","listItemStyle","Layers","onDragEnd","setLayerVisibility","droppableId","updateLayers","destination","source","sortedLayers","map","l","reduce","acc","indexOf","payload","opacity","findIndex","layerMetadata","customLayerMetadata","toggleOrientation","layersOrientation","CompanionWindow","title","IconButton","className","color","transform","List","droppableProps","__jsonld","placeholder","companionWindowKey","component","mapDispatchToProps","mapStateToProps","state","getVisibleCanvasIds","layersCurtain","getSortedLayers","getLayers","orientation","reducers","getTheme","createTheme","deepmerge","config","theme","getCompanionWindowActive","Object","values","companionWindows","filter","item","position","content","xmlns","viewBox","d","fill","Icon","SideBarComponent","companionWindowActive","name","target","mode","companionWindowPlugin","windowSidebarPlugin","componentDidMount","componentDidUpdate","prevProps","world","viewer","items","i","getItemCount","push","getItemAt","forEach","layerMetadataKeys","keys","length","includes","imageSize","getContentSize","OpenSeadragon","Rect","x","y","setClip","updateViewport","actions","RestoreZoomIcon","zoomToWorld","flexDirection","justifyContent","alignContent","right","margin","borderRadius","zIndex","zoom","getShowZoomControlsConfig","getViewer","Units","imperial","conversionFactor","labelFactors","unit","metric","RulerDirections","Location","BOTTOM_LEFT","BOTTOM_RIGHT","TOP_LEFT","TOP_RIGHT","LocationMapping","DocumentRuler","options","Error","location","smallDashSize","largeDashSize","pixelsPerMillimeter","labelsEvery","imperialUnits","labelPrecision","document","createElement","elements","horizontal","makeRulerElements","makeUnitElement","vertical","parentElement","appendChild","ruler","container","querySelector","show","refresh","tiledImage","viewportToImageZoom","viewport","currentPixelsPerMillimeter","getZoom","updateScales","scaleInfo","getScalesInfo","small","backgroundSize","Math","round","large","largeFactor","text","textContent","updateLabels","direction","numLabels","ceil","containerSize","currentLabels","labels","labelElement","numToRemove","slice","element","remove","textMeasureContext","getContext","font","idx","labelNumber","labelFactor","whiteSpace","toExponential","Number","toFixed","left","verticalMargin","textHeight","top","textWidth","measureText","horizontalMargin","updateSize","unregister","removeChild","handlers","handler","removeHandler","register","self","addHandler","hide","bottom","rulerElement","transition","smallScaleElement","backgroundRepeat","largeScaleElement","marginLeft","marginRight","marginTop","marginBottom","backgroundImage","getPixelsPerSmallDash","getLargeFactor","unitDef","unitDefinition","find","factor","val","PhysicalRuler","onMenuButtonClicked","attachRuler","canvasWorld","physicalDimensions","canvases","profile","cm","in","mm","physicalUnits","physicalScale","PixelsPerMillimeter","obj","event","classes","root","layersCurtainPlugin","CustomWindowCanvasNavigationControls","withStyles","Fragment","link","href","rel","quickLinks","contact","line","steps","intro","onboardingInterval","Onboarding","setInterval","clearInterval","introJs","setOptions","start","manifestId","isArray","fetch","response","data","accession_number","mirador","miradorPlugins","App","initMirador","URLSearchParams","getAll"],"mappings":"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","file":"app.7ccd06d6.js","sourcesContent":["\n//https://github.com/ProjectMirador/mirador/blob/master/src/config/settings.js\n\nexport default {\n  id: 'mirador-root',\n  windows: [],\n  selectedTheme: 'fitzwilliam',\n  themes: {\n    fitzwilliam: {\n      palette: {\n        type: 'light',\n        primary: {\n          main: '#000000',\n        },\n        shades: {\n          dark: '#000000', //canvase background\n        },\n      },\n    }\n  },\n  window: {\n    sideBarOpen: true,\n    allowClose: true,\n    defaultSideBarPanel: 'LayersCurtain',\n    allowTopMenuButton: false,\n    allowFullscreen: true,\n    allowMaximize: true,\n    panels: {\n      info: true,\n      attribution: true,\n      canvas: false,\n      annotations: true,\n      search: false,\n      layers: true,\n    },\n  },\n  workspace: {\n    showZoomControls: true,\n  },\n  workspaceControlPanel: {\n    enabled: true,\n  },\n  translations: {\n    en: {\n      openCompanionWindow_LayersCurtain: 'Layers Curtain',\n      addManifestUrlHelp: 'The URL of a IIIF resource manifest (JSON file). Copy and paste it here',\n    }\n  },\n  requests: {\n    postprocessors: [\n      //Mutate network request responses\n      (url, action) => {\n        if (action.json && action.json['@context'] == 'http://iiif.io/api/image/3/context.json') {\n          //Ensure image info ids are using https\n          action.json.id = action.json.id.replace(\"http://\", \"https://\")\n        }\n      }\n    ]\n  },\n  catalog: []\n};","import React, { Component } from 'react';\nimport IIIFThumbnail from 'mirador/dist/es/src/containers/IIIFThumbnail';\nimport Slider from '@material-ui/core/Slider';\nimport DragHandleIcon from '@material-ui/icons/DragHandleSharp';\nimport VisibilityIcon from '@material-ui/icons/VisibilitySharp';\nimport VisibilityOffIcon from '@material-ui/icons/VisibilityOffSharp';\nimport MoveToTopIcon from '@material-ui/icons/VerticalAlignTopSharp';\nimport IconButton from '@material-ui/core/IconButton';\nimport { MiradorMenuButton } from 'mirador/dist/es/src/components/MiradorMenuButton';\nimport { Draggable } from \"react-beautiful-dnd\";\n\nconst getItemStyle = (isDragging, draggableStyle) => ({\n  userSelect: \"none\",\n  background: isDragging ? \"#ecececec\" : \"#ffffff\",\n  width: \"100%\",\n  borderBottom: \"0.5px solid rgba(0, 0, 0, 0.12)\",\n  paddingRight: \"24px\",\n  display: \"flex\",\n  ...draggableStyle\n});\n\nconst imageStyle = {\n  paddingRight: \"4px\"\n}\n\nconst dragHandleWrapperStyle = {\n  display: \"flex\",\n  backgroundColor: \"#f5f5f5\",\n  alignItems: \"center\",\n  borderRight: \"0.5px solid rgba(0, 0, 0, 0.12)\"\n}\n\nconst contentWrapperStyle = {\n  padding: \"16px 8px 8px 8px\",\n  width: \"100%\"\n}\n\nconst itemDetailStyle = {\n  display: \"flex\"\n}\n\nconst ListItem = class extends Component {\n\n  constructor(props) {\n    super(props);\n    this.handleclipChange = this.handleclipChange.bind(this);\n  }\n\n\n  handleclipChange(layerId, value) {\n    const { canvasId, layersOpacityReset, updateLayersCurtain, windowId } = this.props;\n\n    //reset opacity of all layers\n    layersOpacityReset();\n\n    //update curtain\n    const payloadCurtain = {\n      [layerId]: { clip: value / 100.0 },\n    };\n\n    updateLayersCurtain(windowId, canvasId, payloadCurtain);\n  }\n\n\n  render() {\n\n    const { layer, resource, index, toggleLayerVisibility, moveToTop } = this.props;\n\n    const width = 50;\n    const height = undefined;\n\n    return <Draggable\n      key={layer.id}\n      draggableId={layer.id}\n      index={index}>\n      {(provided, snapshot) => (\n        <div\n          ref={provided.innerRef}\n          {...provided.draggableProps}\n          style={getItemStyle(\n            snapshot.isDragging,\n            provided.draggableProps.style\n          )}\n        >\n          <div {...provided.dragHandleProps} style={dragHandleWrapperStyle}>\n            <DragHandleIcon />\n          </div>\n          <div style={contentWrapperStyle}>\n            <div style={itemDetailStyle}>\n              <IIIFThumbnail\n                maxHeight={height}\n                maxWidth={width}\n                resource={resource}\n                style={imageStyle}\n              />\n              <div>\n                <div>{layer.label || layer.id}</div>\n                <MiradorMenuButton\n                  size=\"small\"\n                  aria-label={layer.visibility ? 'Hide layer' : 'Show layer'}\n                  onClick={toggleLayerVisibility}>\n                  {layer.visibility ? <VisibilityIcon /> : <VisibilityOffIcon />}\n                </MiradorMenuButton>\n                {layer.index !== 0 && (\n                  <MiradorMenuButton\n                    size=\"small\"\n                    aria-label={'Move layer to top'}\n                    onClick={moveToTop}>\n                    <MoveToTopIcon />\n                  </MiradorMenuButton>\n                )}\n              </div>\n            </div>\n            <Slider\n              disabled={!layer.visibility}\n              value={layer.clip * 100}\n              onChange={(e, value) => this.handleclipChange(resource.id, value)}\n            />\n          </div>\n        </div>\n      )}\n    </Draggable>\n  }\n}\n\nexport default ListItem;","import React, { Component } from 'react';\nimport CompanionWindow from 'mirador/dist/es/src/containers/CompanionWindow';\nimport LayerListItem from './item';\nimport { DragDropContext, Droppable } from \"react-beautiful-dnd\";\nimport List from '@material-ui/core/List';\nimport ListItem from '@material-ui/core/ListItem';\nimport IconButton from '@material-ui/core/IconButton';\nimport FlipIcon from '@material-ui/icons/Flip';\n\nconst reorder = (list, startIndex, endIndex) => {\n    const result = Array.from(list);\n    const [removed] = result.splice(startIndex, 1);\n    result.splice(endIndex, 0, removed);\n\n    return result;\n};\n\nconst orientationStyle = {\n    paddingLeft: \"16px\"\n}\n\nconst listStyle = {\n    padding: \"0px\",\n    height: \"75vh\"\n}\n\nconst listItemStyle = {\n    padding: \"0px\"\n}\n\nconst Layers = class extends Component {\n\n    constructor(props) {\n        super(props);\n        this.onDragEnd = this.onDragEnd.bind(this);\n        this.layersOpacityReset = this.layersOpacityReset.bind(this);\n        this.setLayerVisibility = this.setLayerVisibility.bind(this);\n        this.moveToTop = this.moveToTop.bind(this);\n        this.droppableId = \"droppable\";\n    }\n\n    onDragEnd(result) {\n        const {\n            canvasId, layers, updateLayers, windowId,\n        } = this.props;\n        if (!result.destination) return;\n        if (result.destination.droppableId !== this.droppableId) return;\n        if (result.source.droppableId !== this.droppableId) return;\n\n        const sortedLayers = reorder(\n            layers.map(l => l.id),\n            result.source.index,\n            result.destination.index,\n        );\n\n        const payload = layers.reduce((acc, layer) => {\n            acc[layer.id] = { index: sortedLayers.indexOf(layer.id) };\n            return acc;\n        }, {});\n\n        updateLayers(windowId, canvasId, payload);\n    }\n\n    layersOpacityReset() {\n        const { windowId, canvasId, layers, updateLayers, } = this.props;\n\n        const payload = {};\n        layers.map((resource) => {\n            payload[resource.id] = { opacity: 1 };\n        })\n        updateLayers(windowId, canvasId, payload);\n    }\n\n    setLayerVisibility(layerId, value) {\n        const { canvasId, updateLayers, windowId, } = this.props;\n\n        const payload = {\n            [layerId]: { visibility: value },\n        };\n\n        updateLayers(windowId, canvasId, payload);\n    }\n\n    moveToTop(layerId) {\n        const { canvasId, layers, updateLayers, windowId, } = this.props;\n\n        const sortedLayers = reorder(layers.map(l => l.id), layers.findIndex(l => l.id === layerId), 0);\n\n        const payload = layers.reduce((acc, layer) => {\n            acc[layer.id] = { index: sortedLayers.indexOf(layer.id) };\n            return acc;\n        }, {});\n\n        updateLayers(windowId, canvasId, payload);\n    }\n\n    render() {\n        const { canvasId,\n            id,\n            windowId,\n            layerMetadata,\n            customLayerMetadata,\n            layers,\n            updateLayersCurtain,\n            toggleOrientation,\n            layersOrientation\n        } = this.props;\n\n        return <div>\n            <CompanionWindow\n                title=\"Layers Curtain\"\n                windowId={windowId}\n                id={id}\n            >\n                <div style={orientationStyle}>\n                    <span>Orientation</span>\n                    <IconButton\n                        className=\"olamalu-layers-curtain-orientation\"\n                        onClick={() => toggleOrientation(windowId)}>\n                        <FlipIcon\n                            aria-label=\"layers orientation\"\n                            disabled color=\"primary\"\n                            style={{ transform: !!layersOrientation ? \"rotate(90deg)\" : \"\" }}\n                        />\n                    </IconButton>\n                </div>\n                <DragDropContext onDragEnd={this.onDragEnd}>\n                    <Droppable droppableId={this.droppableId}>\n                        {(provided, snapshot) => (\n                            <List\n                                {...provided.droppableProps}\n                                ref={provided.innerRef}\n                                style={listStyle}\n                            >\n\n                                {layers.map((resource, index) => {\n                                    const layer = {\n                                        clip: 1,\n                                        visibility: true,\n                                        id: resource.id,\n                                        label: resource?.__jsonld?.label?.en?.[0],\n                                        ...(layerMetadata || {})[resource.id],\n                                        ...(customLayerMetadata || {})[resource.id],\n                                    };\n\n                                    return <ListItem style={listItemStyle} key={resource.id}>\n                                        <LayerListItem\n                                            index={index}\n                                            layer={layer}\n                                            resource={resource}\n                                            windowId={windowId}\n                                            canvasId={canvasId}\n                                            layersOpacityReset={this.layersOpacityReset}\n                                            updateLayersCurtain={updateLayersCurtain}\n                                            toggleLayerVisibility={() => this.setLayerVisibility(resource.id, !layer.visibility)}\n                                            moveToTop={() => this.moveToTop(resource.id)}\n                                        ></LayerListItem>\n                                    </ListItem>\n                                })}\n                                {provided.placeholder}\n                            </List>\n                        )}\n                    </Droppable>\n                </DragDropContext>\n            </CompanionWindow>\n        </div>\n    }\n}\n\nexport default Layers;\n","import { OLAMALU_CUSTOM_LAYERS_UPDATE_LAYERS, OLAMALU_CUSTOM_LAYERS_ORIENTATION } from './actions';\n\nexport const layersCurtainReducer = (state = {}, action) => {\n  switch (action.type) {\n    case OLAMALU_CUSTOM_LAYERS_UPDATE_LAYERS:\n      return {\n        ...state,\n        [action.windowId]: {\n          ...state[action.windowId],\n          [action.canvasId]: {\n            ...state[action.windowId]?.[action.canvasId],\n            ...action.payload\n          }\n        }\n      };\n    case OLAMALU_CUSTOM_LAYERS_ORIENTATION:\n      return {\n        ...state,\n        orientation: {\n          ...state.orientation,\n          [action.windowId]: !state?.orientation?.[action.windowId]\n        }\n      };\n    default:\n      return state;\n  }\n};\n","import List from './list';\nimport { updateLayersCurtain, toggleOrientation } from '../state/actions';\nimport { layersCurtainReducer } from '../state/reducers';\nimport { getVisibleCanvasIds, getSortedLayers, getLayers } from \"mirador/dist/es/src/state/selectors\"\nimport { updateLayers } from \"mirador/dist/es/src/state/actions\"\n\nconst mapStateToProps = (state, { windowId }) => {\n    const canvasIds = getVisibleCanvasIds(state, { windowId });\n    const canvasId = canvasIds[0];\n    return {\n        canvasId,\n        customLayerMetadata: state?.layersCurtain?.[windowId]?.[canvasId],\n        layers: getSortedLayers(state, { canvasId, windowId }),\n        layerMetadata: getLayers(state, { canvasId, windowId }),\n        layersOrientation: !!state.layersCurtain?.orientation?.[windowId],\n    }\n};\n\nconst mapDispatchToProps = {\n    updateLayers,\n    updateLayersCurtain,\n    toggleOrientation\n};\n\nexport default {\n    companionWindowKey: 'LayersCurtain',\n    component: List,\n    mapDispatchToProps,\n    mapStateToProps,\n    reducers: {\n        layersCurtain: layersCurtainReducer,\n    },\n};","export const OLAMALU_CUSTOM_LAYERS_UPDATE_LAYERS = 'olamalu/custom_layers_update_layers';\nexport const OLAMALU_CUSTOM_LAYERS_ORIENTATION = 'olamalu/custom_layers_orientation';\n\nexport function updateLayersCurtain(windowId, canvasId, payload) {\n    return {\n        canvasId: canvasId,\n        payload: payload,\n        type: OLAMALU_CUSTOM_LAYERS_UPDATE_LAYERS,\n        windowId: windowId\n    };\n}\n\nexport function toggleOrientation(windowId) {\n    return {\n        type: OLAMALU_CUSTOM_LAYERS_ORIENTATION,\n        windowId\n    }\n}","import deepmerge from \"deepmerge\";\nimport { createTheme } from \"@material-ui/core/styles\";\n\nexport function getTheme(state) {\n  return createTheme(\n    deepmerge(\n      state.config.theme,\n      state.config.themes[state.config.selectedTheme]\n    )\n  );\n}","import React from 'react';\nimport { getTheme } from '../util';\n\nconst contentId = \"LayersCurtain\";\n\nfunction getCompanionWindowActive(state) {\n  return Object.values(state.companionWindows)\n    .filter(item => item.position === \"left\")?.[0]?.content === contentId;\n}\n\nconst mapStateToProps = (state) => {\n  return {\n    theme: getTheme(state),\n    companionWindowActive: getCompanionWindowActive(state),\n  }\n};\n\nfunction Icon() {\n  return <svg xmlns=\"http://www.w3.org/2000/svg\" height=\"24px\" viewBox=\"0 0 24 24\" width=\"24px\" ><g><path d=\"M0,0h24v24H0V0z\" fill=\"none\" /></g><g><g><path d=\"M18,4v5H6V4H18 M18,2H6C4.9,2,4,2.9,4,4v5c0,1.1,0.9,2,2,2h12c1.1,0,2-0.9,2-2V4C20,2.9,19.1,2,18,2z M18,15v5H6v-5H18 M18,13H6c-1.1,0-2,0.9-2,2v5c0,1.1,0.9,2,2,2h12c1.1,0,2-0.9,2-2v-5C20,13.9,19.1,13,18,13z\" /></g></g></svg>\n}\n\nfunction SideBarComponent(props) {\n  const { theme, companionWindowActive } = props;\n  return <div style={{ display: \"flex\", fill: companionWindowActive ? theme?.palette?.primary?.main || \"#000000\" : \"#757575\" }}>\n    <Icon />\n  </div>\n}\n\nSideBarComponent.value = contentId;\n\nexport default {\n  name: contentId,\n  target: 'WindowSideBarButtons',\n  component: SideBarComponent,\n  mode: 'add',\n  mapStateToProps,\n};\n","import React, { Component } from 'react'\nimport { getVisibleCanvasIds } from 'mirador/dist/es/src/state/selectors';\nimport OpenSeadragon from 'openseadragon';\n\nconst mapStateToProps = (state, { windowId }) => {\n  const canvasIds = getVisibleCanvasIds(state, { windowId });\n  const canvasId = canvasIds[0];\n  return {\n    layerMetadata: state.layersCurtain?.[windowId]?.[canvasId],\n    layersOrientation: state.layersCurtain?.orientation?.[windowId],\n  }\n};\n\nconst Layers = class extends Component {\n\n  constructor(props) {\n    super(props);\n  }\n\n  componentDidMount() {\n  }\n\n  componentDidUpdate(prevProps) {\n    const { viewer: { world }, layerMetadata, layersOrientation } = this.props;\n    if (!world || !layerMetadata) return;\n\n    const items = [];\n    for (let i = 0; i < world.getItemCount(); i += 1) {\n      items.push(world.getItemAt(i));\n    }\n\n    items.forEach((item, i) => {\n      let layer = { clip: 1 };\n      //The layer keys in OpenSeadragon are shorter, not sure why.\n      //Should be a better way to index layers.\n      //Update: These ids come directly from the manifest - choice item id and service id\n      const layerMetadataKeys = Object.keys(layerMetadata);\n      for (let i = 0; i < layerMetadataKeys.length; i++) {\n        if (layerMetadataKeys[i].includes(item.source['@id'])) {\n          layer = layerMetadata[layerMetadataKeys[i]];\n          break;\n        }\n      }\n      const imageSize = item.getContentSize();\n      const clip = !!layersOrientation ?\n        new OpenSeadragon.Rect(0, 0, imageSize.x, imageSize.y * layer.clip) :\n        new OpenSeadragon.Rect(0, 0, imageSize.x * layer.clip, imageSize.y);\n      item.setClip(clip);\n    });\n  }\n\n  render() {\n    return <span></span>\n  }\n}\n\nexport default {\n  target: 'OpenSeadragonViewer',\n  component: Layers,\n  mapStateToProps: mapStateToProps,\n  mode: 'add',\n};\n","import companionWindowPlugin from \"./companionWindowPlugin\";\nimport windowSidebarPlugin from \"./windowSideBarButtonPlugin\";\nimport openSeadragonViewerPlugin from \"./openSeadragonViewerPlugin\";\n\nexport {\n    companionWindowPlugin,\n    windowSidebarPlugin,\n    openSeadragonViewerPlugin\n}\n\nexport default [\n    companionWindowPlugin,\n    windowSidebarPlugin,\n    openSeadragonViewerPlugin\n]","import React from 'react'\nimport { getShowZoomControlsConfig, getViewer } from 'mirador/dist/es/src/state/selectors';\nimport * as actions from 'mirador/dist/es/src/state/actions';\nimport AddIcon from '@material-ui/icons/Add';\nimport RemoveIcon from '@material-ui/icons/Remove';\nimport RestoreZoomIcon from 'mirador/dist/es/src/components/icons/RestoreZoomIcon';\nimport IconButton from '@material-ui/core/IconButton';\n\nconst mapStateToProps = (state, { windowId }) => (\n    {\n        showZoomControls: getShowZoomControlsConfig(state),\n        viewer: getViewer(state, { windowId }),\n    }\n);\n\nconst mapDispatchToProps = { updateViewport: actions.updateViewport };\n\nfunction WindowCanvasNavigationControls(props) {\n\n    const { windowId, updateViewport, viewer, showZoomControls, zoomToWorld } = props;\n\n    if (!showZoomControls) return <></>\n\n\n    function onClickZoomIn() {\n        updateViewport(windowId, {\n            zoom: viewer.zoom * 2,\n        });\n    }\n\n    function onClickZoomOut() {\n        updateViewport(windowId, {\n            zoom: viewer.zoom / 2,\n        });\n    }\n\n    return <div style={{\n        display: 'flex',\n        flexDirection: 'column',\n        justifyContent: 'center',\n        alignContent: 'center',\n        position: 'absolute',\n        right: 0,\n        height: '100%',\n        margin: '8px',\n    }}>\n        <div\n            className='olamalu-navigation-controls'\n            style={{\n                display: 'flex',\n                flexDirection: 'column',\n                backgroundColor: 'rgba(255, 255, 255, 0.8)',\n                borderRadius: '50px',\n                zIndex: 50,\n            }}>\n            <IconButton aria-label=\"Zoom in\" onClick={onClickZoomIn}><AddIcon /></IconButton>\n            <IconButton aria-label=\"Zoom out\" onClick={onClickZoomOut}><RemoveIcon /></IconButton>\n            <IconButton aria-label=\"Recet zoom\" onClick={zoomToWorld}><RestoreZoomIcon /></IconButton>\n        </div>\n    </div>;\n}\n\nexport default {\n    name: 'CustomWindowCanvasNavigationControls',\n    target: 'WindowCanvasNavigationControls',\n    component: WindowCanvasNavigationControls,\n    mapStateToProps,\n    mapDispatchToProps,\n    mode: 'wrap',\n};\n","export const Units = {\n    imperial: [\n        {\n            conversionFactor: 25.4,\n            labelFactors: [1e-9, 1e-6, 1e-3, 0.01, 1],\n            unit: 'in'\n        },\n        {\n            conversionFactor: 25.4 * 12,\n            labelFactors: [1],\n            unit: 'ft'\n        },\n        {\n            conversionFactor: 25.4 * 12 * 5280,\n            labelFactors: [1e-6, 1e-3, 0.1, 1, 10, 100, 1e3, 1e6],\n            unit: 'ml'\n        }\n    ],\n    metric: [\n        {\n            conversionFactor: 1e-6,\n            labelFactors: [0.1, 1, 10, 1000, 1e4],\n            unit: 'nm'\n        },\n        {\n            conversionFactor: 0.001,\n            labelFactors: [1, 10],\n            unit: 'Î¼m'\n        },\n        {\n            conversionFactor: 0.1,\n            labelFactors: [0.1, 1],\n            unit: 'mm'\n        },\n        {\n            conversionFactor: 10,\n            labelFactors: [1, 10],\n            unit: 'cm'\n        },\n        {\n            conversionFactor: 1000,\n            labelFactors: [1, 10, 100],\n            unit: 'm'\n        },\n        {\n            conversionFactor: 1e6,\n            labelFactors: [0.1, 1, 10, 100, 1000, 1000],\n            unit: 'km'\n        },\n        {\n            conversionFactor: 94607304725808000,\n            labelFactors: [1e-9, 1e-6, 1e-3, 1, 1e3, 1e6, 1e9],\n            unit: 'ly'\n        }\n    ]\n};\n\nexport const RulerDirections = {\n    HORIZONTAL: 'horizontal',\n    VERTICAL: 'vertical'\n};\n\nexport const Location = {\n    BOTTOM_LEFT: [0, 1],\n    BOTTOM_RIGHT: [1, 1],\n    TOP_LEFT: [0, 0],\n    TOP_RIGHT: [1, 0]\n};\n\nexport const LocationMapping = {\n    'bottom-left': Location.BOTTOM_LEFT,\n    'bottom-right': Location.BOTTOM_RIGHT,\n    'top-left': Location.TOP_LEFT,\n    'top-right': Location.TOP_RIGHT\n};\n","//Source https://github.com/ubleipzig/mirador-ruler-plugin\n//License MIT https://github.com/ubleipzig/mirador-ruler-plugin/blob/master/LICENSE\n\nimport { Units, RulerDirections, LocationMapping } from \"./constants\";\n\nexport class DocumentRuler {\n  /**\n  *\n  * @param {Object} options may contain:\n  * @param {Object} options.viewer an osd viewer instance\n  * @param {string} options.location the ruler's location\n  * @param {number} options.smallDashSize the size for the ruler's small dashes\n  * @param {number} options.largeDashSize the size for the ruler's large dashes\n  * @param {number} options.pixelsPerMillimeter the pixels per millimeter\n  * @param {number} options.labelsEvery the repetation frequency of the label\n  * @param {string} options.color the color to use\n  * @param {number} options.labelPrecision the label's precision\n  * @param {boolean} options.show whether show the ruler initially or not\n  * @param {boolean} options.imperialUnits whether to use imperial units or not\n  */\n  constructor(options) {\n\n    // eslint-disable-next-line no-param-reassign\n    options = options || {};\n    if (!options.viewer) {\n      throw new Error('A viewer must be specified.');\n    }\n\n    // Set up instance state\n    this.viewer = options.viewer;\n    this.location = LocationMapping[options.location || 'bottom-left'];\n    this.smallDashSize = options.smallDashSize || 10;\n    this.largeDashSize = options.largeDashSize || 15;\n    this.pixelsPerMillimeter = options.pixelsPerMillimeter;\n    this.labelsEvery = options.labelsEvery || 5;\n    this.imperialUnits = options.imperialUnits || false;\n    this.color = options.color || '#ffffff';\n    this.labelPrecision = options.labelPrecision || 3;\n\n    this.canvas = document.createElement('canvas', null, null);\n    this.elements = {\n      horizontal: this.makeRulerElements(RulerDirections.HORIZONTAL),\n      unit: this.makeUnitElement(),\n      vertical: this.makeRulerElements(RulerDirections.VERTICAL),\n    };\n\n    this.parentElement = document.createElement('div');\n    this.parentElement.className = 'plugin-ruler';\n    this.parentElement.appendChild(this.elements.horizontal.ruler);\n    this.parentElement.appendChild(this.elements.vertical.ruler);\n    this.parentElement.appendChild(this.elements.unit);\n    this.viewer.container = document.querySelector(`#${options.viewer.id} .openseadragon-container`);\n    this.viewer.container.appendChild(this.parentElement);\n    // ToDo use class\n    this.parentElement.style.visibility = options.show ? 'visible' : 'hidden';\n  }\n\n  /**\n   * setter for the pixelsPerMillimeter property\n   */\n  get PixelsPerMillimeter() {\n    return this.pixelsPerMillimeter;\n  }\n\n  /**\n   * getter for the pixelsPerMillimeter property\n   */\n  set PixelsPerMillimeter(val) {\n    this.pixelsPerMillimeter = val;\n  }\n\n  /**\n   *\n   * @param {*} tiledImage a tiled image ressource\n   */\n  refresh(tiledImage) {\n    if (tiledImage && tiledImage.viewportToImageZoom && tiledImage !== this.tiledImage) {\n      this.tiledImage = tiledImage;\n    }\n\n    if (this.tiledImage) {\n      const { viewport } = this.viewer;\n      const zoom = this.tiledImage.viewportToImageZoom(viewport.getZoom(true));\n      const currentPixelsPerMillimeter = zoom * this.pixelsPerMillimeter;\n      this.updateScales(currentPixelsPerMillimeter);\n    }\n  }\n\n  /**\n   * Update the scales with the new pixelsPerMillimeter value\n   */\n  updateScales(pixelsPerMillimeter) {\n    const scaleInfo = this.getScalesInfo(pixelsPerMillimeter);\n\n    this.elements.horizontal.small.style.backgroundSize = Math.round(scaleInfo.small) + 'px 100%';\n    this.elements.horizontal.large.style.backgroundSize = Math.round(scaleInfo.small) * scaleInfo.largeFactor + 'px 100%';\n    this.elements.vertical.small.style.backgroundSize = '100% ' + Math.round(scaleInfo.small) + 'px';\n    this.elements.vertical.large.style.backgroundSize = '100% ' + Math.round(scaleInfo.small) * scaleInfo.largeFactor + 'px';\n\n    if (this.elements.unit.text !== scaleInfo.unit) {\n      this.elements.unit.textContent = scaleInfo.unit;\n    }\n\n    this.updateLabels(RulerDirections.HORIZONTAL, scaleInfo);\n    this.updateLabels(RulerDirections.VERTICAL, scaleInfo);\n  }\n\n  /**\n   *\n   * @param {*} direction the label's direction\n   * @param {*} scaleInfo scale info\n   */\n  updateLabels(direction, scaleInfo) {\n    let numLabels;\n    if (direction === RulerDirections.VERTICAL) {\n      // eslint-disable-next-line max-len\n      numLabels = Math.ceil(this.viewer.viewport.containerSize.y / (Math.round(scaleInfo.small) * scaleInfo.largeFactor) / this.labelsEvery);\n    } else {\n      // eslint-disable-next-line max-len\n      numLabels = Math.ceil(this.viewer.viewport.containerSize.x / (Math.round(scaleInfo.small) * scaleInfo.largeFactor) / this.labelsEvery);\n    }\n\n    const currentLabels = this.elements[direction].labels;\n    if (currentLabels.length < numLabels) {\n      while (currentLabels.length < numLabels) {\n        const labelElement = document.createElement('span');\n        labelElement.className = 'ruler-label';\n        labelElement.style.color = this.color;\n        labelElement.style.position = 'absolute';\n\n        if (this.location[0] === 1 && direction === RulerDirections.HORIZONTAL) {\n          labelElement.style.transform += ' scaleX(-1)';\n        }\n        if (this.location[1] === 1) {\n          labelElement.style.transform += ' scaleY(-1)';\n        }\n        currentLabels.push(labelElement);\n        this.elements[direction].ruler.appendChild(labelElement);\n      }\n    } else if (currentLabels.length > numLabels) {\n      const numToRemove = currentLabels.length - numLabels;\n      currentLabels.slice(-numToRemove).forEach((element) => {\n        element.remove();\n      });\n      this.elements[direction].labels = currentLabels.slice(0, numLabels);\n    }\n    const textMeasureContext = this.canvas.getContext('2d');\n    textMeasureContext.font = \"'Open Sans', 'Lucida Grande', Verdana, Arial, sans-serif\";\n    currentLabels.forEach((label, idx) => {\n      if (idx === 0) {\n        return;\n      }\n      const labelNumber = idx * scaleInfo.labelFactor * this.labelsEvery;\n      let text;\n\n      if (labelNumber < 1e-4 || labelNumber > 1e4) {\n        label.style.whiteSpace = 'nowrap';\n        text = labelNumber.toExponential(this.labelPrecision);\n      } else {\n        text = Number(labelNumber.toFixed(this.labelPrecision));\n      }\n\n      if (direction === RulerDirections.VERTICAL) {\n        const textHeight = 17;\n        if (this.location[0] === 0) {\n          label.style.left = this.largeDashSize * 1.5 + 'px';\n        } else {\n          label.style.right = this.largeDashSize * 1.5 + 'px';\n        }\n\n        const verticalMargin = (this.labelsEvery * idx * Math.round(scaleInfo.small) * scaleInfo.largeFactor - (textHeight / 2)) + 'px';\n        label.style.top = verticalMargin;\n      } else {\n        const textWidth = textMeasureContext.measureText(text).width;\n        const horizontalMargin = (this.labelsEvery * idx * Math.round(scaleInfo.small) * scaleInfo.largeFactor - (textWidth / 1)) + 'px';\n        label.style.top = this.largeDashSize * 1.5 + 'px';\n        label.style.left = horizontalMargin;\n      }\n      label.textContent = text;\n    }, this);\n  }\n\n  /**\n   * update size\n   */\n  updateSize() {\n    this.elements.horizontal.small.style.width = this.viewer.viewport.containerSize.x + 'px';\n    this.elements.horizontal.large.style.width = this.viewer.viewport.containerSize.x + 'px';\n    this.elements.vertical.small.style.height = this.viewer.viewport.containerSize.y + 'px';\n    this.elements.vertical.large.style.height = this.viewer.viewport.containerSize.y + 'px';\n  }\n\n  /**\n   * unregister the previously registered handlers\n   */\n  unregister() {\n    // ToDo call this and check if bind 'this' is necessary\n    this.viewer.container.removeChild(this.parentElement);\n    this.handlers.forEach((handler) => {\n      this.viewer.removeHandler(handler);\n    });\n  }\n\n  /**\n   * enables to ruler, especially adding the handlers\n   */\n  register() {\n    const self = this;\n    this.handlers = [\n      this.viewer.addHandler('open', () => {\n        self.refresh();\n        self.updateSize();\n      }),\n      this.viewer.addHandler('animation', () => {\n        self.refresh();\n      }),\n      this.viewer.addHandler('resize', () => {\n        self.refresh();\n        self.updateSize();\n      }),\n    ];\n  }\n\n  /**\n   * hide the ruler\n   */\n  hide() {\n    this.parentElement.style.visibility = 'hidden';\n  }\n\n  /**\n   * show the ruler\n   */\n  show() {\n    this.parentElement.style.visibility = 'visible';\n  }\n\n  /**\n   * create the element to show the unit\n   */\n  makeUnitElement() {\n    const element = document.createElement('span', null, null);\n    element.className = 'ruler-unit';\n\n    const margin = (this.largeDashSize * 1.25) + 'px';\n    element.style.position = 'absolute';\n\n    if (this.location[0] === 0) {\n      element.style.left = margin;\n    } else {\n      element.style.right = margin;\n    }\n\n    if (this.location[1] === 0) {\n      element.style.top = margin;\n    } else {\n      element.style.bottom = margin;\n    }\n    element.style.color = this.color;\n    return element;\n  }\n\n  /**\n   * create the ruler element\n   * @param {*} direction\n   */\n  makeRulerElements(direction) {\n    // Basic styling for parent element\n    const rulerElement = document.createElement('div', null, null);\n    rulerElement.style.position = 'absolute';\n    rulerElement.style.transition = 'all 0.1s ease-in';\n\n    const smallScaleElement = document.createElement('div', null, null);\n    smallScaleElement.style.position = 'absolute';\n    smallScaleElement.style.backgroundRepeat = 'repeat';\n\n    const largeScaleElement = document.createElement('div', null, null);\n    largeScaleElement.style.position = 'absolute';\n    largeScaleElement.style.backgroundRepeat = 'repeat';\n\n    // Positioning\n    if (this.location[0] === 0) { // left?\n      if (direction === RulerDirections.HORIZONTAL) {\n        rulerElement.style.marginLeft = this.largeDashSize + 'px';\n      }\n      rulerElement.style.left = 0;\n    } else {\n      if (direction === RulerDirections.HORIZONTAL) {\n        rulerElement.style.marginRight = this.largeDashSize + 'px';\n        rulerElement.style.transform += ' scaleX(-1)';\n      } else {\n        smallScaleElement.style.right = 0;\n        largeScaleElement.style.right = 0;\n      }\n      rulerElement.style.right = 0;\n    }\n    if (this.location[1] === 0) { // top?\n      if (direction === RulerDirections.VERTICAL) {\n        rulerElement.style.marginTop = this.largeDashSize + 'px';\n      }\n      rulerElement.style.top = 0;\n    } else {\n      if (direction === RulerDirections.VERTICAL) {\n        rulerElement.style.marginBottom = this.largeDashSize + 'px';\n      }\n      rulerElement.style.bottom = 0;\n      rulerElement.style.transform += ' scaleY(-1)';\n    }\n\n    if (direction === RulerDirections.HORIZONTAL) {\n      smallScaleElement.style.height = this.smallDashSize + 'px';\n      smallScaleElement.style.backgroundImage = 'linear-gradient(to left, ' + this.color + ' 1px, rgba(0, 0, 0, 0) 0px)';\n      smallScaleElement.style.backgroundImage = '-moz-linear-gradient(left, ' + this.color + ' 1px, rgba(0, 0, 0, 0) 0px)';\n      smallScaleElement.style.backgroundImage = '-webkit-linear-gradient(left, ' + this.color + ' 1px, rgba(0, 0, 0, 0) 0px)';\n      largeScaleElement.style.height = this.largeDashSize + 'px';\n      largeScaleElement.style.backgroundImage = 'linear-gradient(to left, ' + this.color + ' 2px, rgba(0, 0, 0, 0) 0px)';\n      largeScaleElement.style.backgroundImage = '-moz-linear-gradient(left, ' + this.color + ' 2px, rgba(0, 0, 0, 0) 0px)';\n      largeScaleElement.style.backgroundImage = '-webkit-linear-gradient(left, ' + this.color + ' 2px, rgba(0, 0, 0, 0) 0px)';\n    } else {\n      smallScaleElement.style.width = this.smallDashSize + 'px';\n      smallScaleElement.style.backgroundImage = 'linear-gradient(to top, ' + this.color + ' 1px, rgba(0, 0, 0, 0) 0px)';\n      smallScaleElement.style.backgroundImage = '-moz-linear-gradient(top, ' + this.color + ' 1px, rgba(0, 0, 0, 0) 0px)';\n      smallScaleElement.style.backgroundImage = '-webkit-linear-gradient(top, ' + this.color + ' 1px, rgba(0, 0, 0, 0) 0px)';\n      largeScaleElement.style.width = this.largeDashSize + 'px';\n      largeScaleElement.style.backgroundImage = 'linear-gradient(to top, ' + this.color + ' 2px, rgba(0, 0, 0, 0) 0px)';\n      largeScaleElement.style.backgroundImage = '-moz-linear-gradient(top, ' + this.color + ' 2px, rgba(0, 0, 0, 0) 0px)';\n      largeScaleElement.style.backgroundImage = '-webkit-linear-gradient(top, ' + this.color + ' 2px, rgba(0, 0, 0, 0) 0px)';\n    }\n    rulerElement.appendChild(smallScaleElement);\n    rulerElement.appendChild(largeScaleElement);\n\n    return {\n      labels: [],\n      large: largeScaleElement,\n      ruler: rulerElement,\n      small: smallScaleElement,\n    };\n  }\n\n  /** Return the pixel steps for the small and large scales, the factor\n   *  used for the labels on the large scale as well as the unit to display. */\n  getScalesInfo(pixelsPerMillimeter) {\n    /**\n     * calculates the numver of pixels for the small\n     * @param {*} conversionFactor\n     * @param {*} largeFactor\n     * @param {*} labelFactor\n     */\n    const getPixelsPerSmallDash = (conversionFactor, largeFactor, labelFactor) => ((conversionFactor * pixelsPerMillimeter * labelFactor) / largeFactor);\n\n    /**\n     * calculates the scaling factor\n     */\n    const getLargeFactor = (unitDef, labelFactor) => {\n      if (this.imperialUnits && unitDef.unit === 'in' && labelFactor === 1) {\n        return 8;\n      }\n      return 10;\n    };\n\n    const units = this.imperialUnits ? Units.imperial : Units.metric;\n\n    const unitDefinition = units.find((unitDef) => {\n      const labelFactor = unitDef.labelFactors.slice(-1)[0];\n      const largeFactor = getLargeFactor(unitDef, labelFactor);\n      return getPixelsPerSmallDash(unitDef.conversionFactor, largeFactor, labelFactor) > 2;\n    });\n\n    const labelFactor = unitDefinition.labelFactors.find((factor) => {\n      const largeFactor = getLargeFactor(unitDefinition, factor);\n      return getPixelsPerSmallDash(unitDefinition.conversionFactor, largeFactor, factor) > 2;\n    });\n\n    const largeFactor = getLargeFactor(unitDefinition, labelFactor);\n    const ret = {\n      labelFactor,\n      largeFactor,\n      small: unitDefinition.conversionFactor * labelFactor * pixelsPerMillimeter * (1 / largeFactor),\n      unit: unitDefinition.unit,\n    };\n    return ret;\n  }\n}\n","import React, { Component } from 'react'\nimport IconButton from '@material-ui/core/IconButton';\nimport RulerIcon from '@material-ui/icons/Straighten';\nimport { DocumentRuler } from './DocumentRuler';\nimport withStyles from '@material-ui/core/styles/withStyles';\n\nconst styles = () => {\n    return {\n        root: {\n            borderRadius: 25,\n            position: 'absolute',\n            top: 64,\n            right: 8,\n            zIndex: 999,\n            display: 'flex',\n            backgroundColor: 'rgba(255, 255, 255, 0.8)'\n        },\n    };\n};\n\nconst PhysicalRuler = class extends Component {\n\n    constructor(props) {\n        super(props);\n        this.onMenuButtonClicked = this.onMenuButtonClicked.bind(this);\n        this.show = false;\n    }\n\n    componentDidMount() {\n    }\n\n    componentDidUpdate(prevProps) {\n        const { viewer } = this.props;\n        if (viewer) this.attachRuler();\n    }\n\n    attachRuler() {\n        const { viewer, canvasWorld } = this.props;\n        const physicalDimensions = canvasWorld?.canvases[0]?.canvas?.__jsonld?.physicalDimensions;\n        if (physicalDimensions && physicalDimensions.profile === 'http://iiif.io/api/annex/extensions/physdim') {\n            const millimetersPerPhysicalUnit = {\n                cm: 10.0,\n                in: 25.4,\n                mm: 1.0,\n            };\n            const pixelsPerMillimeter = 1 / (millimetersPerPhysicalUnit[physicalDimensions.physicalUnits] * physicalDimensions.physicalScale);\n\n            this.ruler = this.ruler || new DocumentRuler({\n                viewer,\n                show: true,\n                location: 'bottom-left',\n                labelsEvery: 1\n            });\n            this.ruler.PixelsPerMillimeter = pixelsPerMillimeter;\n            this.ruler.register();\n\n            viewer.addHandler('tile-loaded', (obj) => {\n                this.ruler.updateSize();\n                this.ruler.refresh(obj.tiledImage);\n            });\n\n            this.show = true;\n        }\n    }\n\n    onMenuButtonClicked(event) {\n        if (this.show) {\n            this.show = false;\n            this.ruler.hide();\n        } else {\n            this.show = true;\n            this.ruler.show();\n        }\n    }\n\n    render() {\n        const {\n            show,\n            classes\n        } = this.props;\n\n        return <div className={`MuiPaper-elevation4 ${classes.root} olamalu-physical-ruler`}>\n            <IconButton\n                onClick={this.onMenuButtonClicked}>\n                <RulerIcon title={show ? 'show ruler' : 'hide ruler'} />\n            </IconButton>\n        </div>\n    }\n}\n\nexport default {\n    name: 'PhysicalRuler',\n    target: 'OpenSeadragonViewer',\n    component: withStyles(styles)(PhysicalRuler),\n    mode: 'add',\n};\n","import layersCurtainPlugin from \"./layersCurtain\";\nimport physicalRulerPlugin from \"./physicalRuler\";\n\nexport {\n    layersCurtainPlugin,\n    physicalRulerPlugin\n}\n\nexport default [\n    layersCurtainPlugin,\n    physicalRulerPlugin\n]","import CustomWindowCanvasNavigationControls from \"./CanvasNavigationControls\";\nimport RulerWrapper from \"./RulerWrapper\";\n\nexport {\n    CustomWindowCanvasNavigationControls,\n    RulerWrapper\n}\n\nexport default [\n    CustomWindowCanvasNavigationControls,\n    RulerWrapper\n]","import React from \"react\";\n\nexport default function () {\n    const mainMenu = [\n        { link: 'https://unlocking-miniatures.fitzmuseum.cam.ac.uk/', title: 'Home' },\n        { link: 'https://unlocking-miniatures.fitzmuseum.cam.ac.uk/collections', title: 'Collections' },\n        { link: 'https://unlocking-miniatures.fitzmuseum.cam.ac.uk/about', title: 'About' },\n        { link: 'https://unlocking-miniatures.fitzmuseum.cam.ac.uk/blog', title: 'Blog' },\n    ]\n    return (\n        <React.Fragment>\n            <ul className=\"main-menu\">\n                {mainMenu.map((item) => (\n                    <li key={item.link}><a href={item.link}>{item.title}</a></li>\n                ))}\n            </ul>\n        </React.Fragment>\n    )\n}\n","import React from \"react\";\n\nexport default function () {\n\n    const content = {\n        quickLinks: [\n            { link: 'https://unlocking-miniatures.fitzmuseum.cam.ac.uk/', title: 'Home' },\n            { link: 'https://unlocking-miniatures.fitzmuseum.cam.ac.uk/collections', title: 'Collections' },\n            { link: 'https://unlocking-miniatures.fitzmuseum.cam.ac.uk/about', title: 'About' },\n            { link: 'https://unlocking-miniatures.fitzmuseum.cam.ac.uk/blog', title: 'Blog' },\n        ],\n        contact: [\n            { line: \"portraitminiatures [at] fitzmuseum.cam.ac.uk\" },\n            { line: \"The Fitzwilliam Museum\" },\n            { line: \"University of Cambridge\" }\n        ],\n    }\n\n    return (\n        <div className=\"footer\">\n            <div className=\"footer--main\">\n                <div className=\"footer--quick-links\">\n                    <h4>Quick links</h4>\n                    <ul>{content.quickLinks.map(item => (\n                        <li><a href={item?.link}>{item.title}</a></li>\n                    ))}</ul>\n                </div>\n                <div className=\"footer--contact\">\n                    <h4>Contact</h4>\n                    <ul>{content.contact.map(item => (\n                        <li>{item?.line}</li>\n                    ))}</ul>\n                </div>\n                <div className=\"footer--copyright-codes\">\n                    <div>Content: <a\n                        href=\"https://creativecommons.org/licenses/by-nc/4.0/\"\n                        target=\"__blank\"\n                        rel=\"noopener\">CC-BY-NC</a></div>\n                    <div>Metadata: <a\n                        href=\"https://creativecommons.org/licenses/by-nc/4.0/\"\n                        target=\"__blank\"\n                        rel=\"noopener\">CC-BY-NC</a></div>\n                    <div>Images: <a\n                        href=\"https://creativecommons.org/licenses/by-nc-nd/4.0/\"\n                        target=\"__blank\"\n                        rel=\"noopener\">CC-BY-NC-ND</a></div>\n                    <div>Code: <a\n                        href=\"https://www.gnu.org/licenses/gpl-3.0.en.html\"\n                        target=\"__blank\"\n                        rel=\"noopener\">GPL-V3</a></div>\n                </div>\n            </div>\n            <div className=\"footer--copyright\">\n                <span>Â© 2022 The University of Cambridge</span>\n                <span><a\n                    target=\"__blank\"\n                    rel=\"noopener\"\n                    href=\"https://www.information-compliance.admin.cam.ac.uk/data-protection/general-data\">Privacy policy</a></span>\n                <span>Website by <a\n                    href=\"https://www.olamalu.com/\"\n                    target=\"__blank\"\n                    rel=\"noopener\"\n                >www.olamalu.com</a></span>\n            </div>\n        </div>\n    )\n}\n","import React, { Component } from 'react'\nimport introJs from 'intro.js';\nimport 'intro.js/introjs.css';\n\nconst steps = [\n    {\n        element: 'button[role=\"tab\"][aria-label=\"Annotations\"]',\n        title: 'Annotations',\n        intro: 'View annotations and open micrograph images.'\n    },\n    {\n        element: 'button[role=\"tab\"][aria-label=\"Layers\"]',\n        title: 'Layers',\n        intro: 'Control opacity of individual layers.'\n    },\n    {\n        element: 'button[role=\"tab\"][aria-label=\"Layers Curtain\"]',\n        title: 'Layers Curtain',\n        intro: 'View layers side be side with the curtain slider.'\n    },\n    {\n        element: '.olamalu-layers-curtain-orientation',\n        title: 'Orientation',\n        intro: 'Click to change the orientation of the curtain from vertical to horizontal.'\n    },    \n    {\n        element: '.olamalu-physical-ruler',\n        title: 'Ruler',\n        intro: 'Click to turn on and off the ruler.'\n    },\n    {\n        element: '.olamalu-navigation-controls',\n        title: 'Navigation controls',\n        intro: 'Zoom in and out with these controls, mouse scroll or touch input.'\n    },\n    {\n        element: '#addBtn[aria-label=\"Add resource\"]',\n        title: 'Add resource',\n        intro: 'Add and compare another resource.'\n    },\n    {\n        element: 'button[aria-label=\"Toggle sidebar\"]',\n        title: 'Collapse sidebar',\n        intro: 'Hide the sidebar to allow for unobstructed viewing.'\n    }\n];\nlet onboardingInterval = null;\n\nfunction initOnboarding() {\n    //Check elements are loaded\n    if (!onboardingInterval || !document.querySelector(steps[0].element)) {\n        return;\n    }\n    clearInterval(onboardingInterval);\n    onboardingInterval = null;\n\n    introJs().setOptions({\n        steps,\n    }).start();\n}\n\nexport default class Onboarding extends Component {\n\n    componentDidMount() {\n        onboardingInterval = setInterval(() => {\n            initOnboarding();\n        }, 2000);\n    }\n\n    render() {\n        return <React.Fragment></React.Fragment>\n    }\n}\n","import React, { Component } from 'react'\nimport { render } from 'react-dom'\nimport mirador from \"mirador\";\nimport config from \"./mirador-config.js\";\nimport miradorPlugins from './plugins';\nimport Header from './components/header.js';\nimport Footer from './components/footer.js';\nimport Onboarding from './components/onboarding.js';\nimport './index.css'\n\nasync function initMirador(manifestId) {\n  const windows = [];\n  if (Array.isArray(manifestId)) {\n    manifestId.forEach(item => {\n      windows.push({\n        manifestId: item\n      })\n    })\n  }\n  const response = await fetch(\"https://unlocking-miniatures.fitz.ms/items/miniatures/?fields%5B%5D=accession_number\");\n  const data = (await response.json()).data;\n  const catalog = data.map(item => ({\n    manifestId: `https://miniatures-iiif.fitzmuseum.cam.ac.uk/${item.accession_number}/manifest.json`\n  }));\n  if (windows.length < 1) {\n    windows.push(catalog[0]);\n  }\n  mirador.viewer({\n    ...config,\n    windows,\n    catalog\n  }, miradorPlugins);\n}\n\nexport default class App extends Component {\n\n  componentDidMount() {\n    let params = new URLSearchParams(document.location.search);\n    let manifestId = params.getAll(\"manifestId[]\");\n    initMirador(manifestId);\n  }\n\n  render() {\n    return <React.Fragment>\n      <Header />\n      <div className='main-content'>\n        <div id={config.id} />\n      </div>\n      <Footer />\n      <Onboarding />\n    </React.Fragment>\n  }\n}\n\nrender(<App />, document.querySelector('#app'))\n"],"sourceRoot":""}