(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{517:function(e,t,n){e.exports=n(734)},655:function(e,t,n){},734:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return Xe}));var r=n(72),i=n(417),a=n(0),o=n.n(a),l=n(27),s=n(491),c={id:"mirador-root",windows:[],selectedTheme:"fitzwilliam",themes:{fitzwilliam:{palette:{type:"light",primary:{main:"#000000"},shades:{dark:"#000000"}}}},window:{sideBarOpen:!0,allowClose:!0,defaultSideBarPanel:"info",allowTopMenuButton:!1,allowFullscreen:!0,allowMaximize:!0,panels:{info:!0,attribution:!0,canvas:!1,annotations:!0,search:!1,layers:!0}},workspace:{showZoomControls:!0},workspaceControlPanel:{enabled:!0},translations:{en:{openCompanionWindow_LayersCurtain:"Layers Curtain"}},requests:{postprocessors:[function(e,t){t.json&&"http://iiif.io/api/image/3/context.json"==t.json["@context"]&&(t.json.id=t.json.id.replace("http://","https://"))}]},catalog:[]},u=n(170),d=n(101),p=n(43),h=n(77),m=n(800),f=n(215),v=n.n(f),y=n(147),g=n.n(y),b=n(148),w=n.n(b),E=n(226),x=n.n(E),k=n(172),I=n(102),C={paddingRight:"4px"},O={display:"flex",backgroundColor:"#f5f5f5",alignItems:"center",borderRight:"0.5px solid rgba(0, 0, 0, 0.12)"},L={padding:"16px 8px 8px 8px",width:"100%"},z={display:"flex"},S=o.a.createElement(v.a,null),j=o.a.createElement(g.a,null),T=o.a.createElement(w.a,null),F=o.a.createElement(x.a,null),M=function(e){function t(t){var n;return(n=e.call(this,t)||this).handleclipChange=n.handleclipChange.bind(Object(d.a)(n)),n}Object(r.a)(t,e);var n=t.prototype;return n.handleclipChange=function(e,t){var n,r=this.props,i=r.canvasId,a=r.layersOpacityReset,o=r.updateLayersCurtain,l=r.windowId;a(),o(l,i,((n={})[e]={clip:t/100},n))},n.render=function(){var e=this,t=this.props,n=t.layer,r=t.resource,i=t.index,a=t.toggleLayerVisibility,l=t.moveToTop,s=o.a.createElement(h.a,{maxHeight:void 0,maxWidth:50,resource:r,style:C}),c=o.a.createElement(k.a,{size:"small","aria-label":"Move layer to top",onClick:l},F);return o.a.createElement(I.b,{key:n.id,draggableId:n.id,index:i},(function(t,i){return o.a.createElement("div",Object(u.a)({ref:t.innerRef},t.draggableProps,{style:(l=i.isDragging,d=t.draggableProps.style,Object.assign({userSelect:"none",background:l?"#ecececec":"#ffffff",width:"100%",borderBottom:"0.5px solid rgba(0, 0, 0, 0.12)",paddingRight:"24px",display:"flex"},d))}),o.a.createElement("div",Object(u.a)({},t.dragHandleProps,{style:O}),S),o.a.createElement("div",{style:L},o.a.createElement("div",{style:z},s,o.a.createElement("div",null,o.a.createElement("div",null,n.label||n.id),o.a.createElement(k.a,{size:"small","aria-label":n.visibility?"Hide layer":"Show layer",onClick:a},n.visibility?j:T),0!==n.index&&c)),o.a.createElement(m.a,{disabled:!n.visibility,value:100*n.clip,onChange:function(t,n){return e.handleclipChange(r.id,n)}})));var l,d}))},t}(a.Component),_=n(746),P=n(747),D=n(740),R=n(426),N=n.n(R),H=function(e,t,n){var r=Array.from(e),i=r.splice(t,1)[0];return r.splice(n,0,i),r},B={paddingLeft:"16px"},A={padding:"0px",height:"75vh"},V={padding:"0px"},G=o.a.createElement("span",null,"Orientation"),U=function(e){function t(t){var n;return(n=e.call(this,t)||this).onDragEnd=n.onDragEnd.bind(Object(d.a)(n)),n.layersOpacityReset=n.layersOpacityReset.bind(Object(d.a)(n)),n.setLayerVisibility=n.setLayerVisibility.bind(Object(d.a)(n)),n.moveToTop=n.moveToTop.bind(Object(d.a)(n)),n.droppableId="droppable",n}Object(r.a)(t,e);var n=t.prototype;return n.onDragEnd=function(e){var t=this.props,n=t.canvasId,r=t.layers,i=t.updateLayers,a=t.windowId;if(e.destination&&e.destination.droppableId===this.droppableId&&e.source.droppableId===this.droppableId){var o=H(r.map((function(e){return e.id})),e.source.index,e.destination.index);i(a,n,r.reduce((function(e,t){return e[t.id]={index:o.indexOf(t.id)},e}),{}))}},n.layersOpacityReset=function(){var e=this.props,t=e.windowId,n=e.canvasId,r=e.layers,i=e.updateLayers,a={};r.map((function(e){a[e.id]={opacity:1}})),i(t,n,a)},n.setLayerVisibility=function(e,t){var n,r=this.props,i=r.canvasId;(0,r.updateLayers)(r.windowId,i,((n={})[e]={visibility:t},n))},n.moveToTop=function(e){var t=this.props,n=t.canvasId,r=t.layers,i=t.updateLayers,a=t.windowId,o=H(r.map((function(e){return e.id})),r.findIndex((function(t){return t.id===e})),0);i(a,n,r.reduce((function(e,t){return e[t.id]={index:o.indexOf(t.id)},e}),{}))},n.render=function(){var e=this,t=this.props,n=t.canvasId,r=t.id,i=t.windowId,a=t.layerMetadata,l=t.customLayerMetadata,s=t.layers,c=t.updateLayersCurtain,d=t.toggleOrientation,h=t.layersOrientation;return o.a.createElement("div",null,o.a.createElement(p.a,{title:"Layers Curtain",windowId:i,id:r},o.a.createElement("div",{style:B},G,o.a.createElement(D.a,{onClick:function(){return d(i)}},o.a.createElement(N.a,{"aria-label":"layers orientation",disabled:!0,color:"primary",style:{transform:h?"rotate(90deg)":""}}))),o.a.createElement(I.a,{onDragEnd:this.onDragEnd},o.a.createElement(I.c,{droppableId:this.droppableId},(function(t,r){return o.a.createElement(_.a,Object(u.a)({},t.droppableProps,{ref:t.innerRef,style:A}),s.map((function(t,r){var s,u,d,p=Object.assign({clip:1,visibility:!0,id:t.id,label:null==t||null===(s=t.__jsonld)||void 0===s||null===(u=s.label)||void 0===u||null===(d=u.en)||void 0===d?void 0:d[0]},(a||{})[t.id],(l||{})[t.id]);return o.a.createElement(P.a,{style:V,key:t.id},o.a.createElement(M,{index:r,layer:p,resource:t,windowId:i,canvasId:n,layersOpacityReset:e.layersOpacityReset,updateLayersCurtain:c,toggleLayerVisibility:function(){return e.setLayerVisibility(t.id,!p.visibility)},moveToTop:function(){return e.moveToTop(t.id)}}))})),t.placeholder)})))))},t}(a.Component);var W=n(42),Z=n(212),q={companionWindowKey:"LayersCurtain",component:U,mapDispatchToProps:{updateLayers:n(383).a,updateLayersCurtain:function(e,t,n){return{canvasId:t,payload:n,type:"olamalu/custom_layers_update_layers",windowId:e}},toggleOrientation:function(e){return{type:"olamalu/custom_layers_orientation",windowId:e}}},mapStateToProps:function(e,t){var n,r,i,a,o=t.windowId,l=Object(W.l)(e,{windowId:o})[0];return{canvasId:l,customLayerMetadata:null==e||null===(n=e.layersCurtain)||void 0===n||null===(r=n[o])||void 0===r?void 0:r[l],layers:Object(Z.d)(e,{canvasId:l,windowId:o}),layerMetadata:Object(Z.b)(e,{canvasId:l,windowId:o}),layersOrientation:!!(null===(i=e.layersCurtain)||void 0===i||null===(a=i.orientation)||void 0===a?void 0:a[o])}},reducers:{layersCurtain:function(e,t){var n,r,i,a,o,l;switch(void 0===e&&(e={}),t.type){case"olamalu/custom_layers_update_layers":return Object.assign({},e,((i={})[t.windowId]=Object.assign({},e[t.windowId],((r={})[t.canvasId]=Object.assign({},null===(n=e[t.windowId])||void 0===n?void 0:n[t.canvasId],t.payload),r)),i));case"olamalu/custom_layers_orientation":return Object.assign({},e,{orientation:Object.assign({},e.orientation,(l={},l[t.windowId]=!(null===(a=e)||void 0===a||null===(o=a.orientation)||void 0===o?void 0:o[t.windowId]),l))});default:return e}}}},Y=n(74),J=n.n(Y),X=n(492);function K(e){return Object(X.b)(J()(e.config.theme,e.config.themes[e.config.selectedTheme]))}function Q(e){var t,n;return"LayersCurtain"===(null===(t=Object.values(e.companionWindows).filter((function(e){return"left"===e.position})))||void 0===t||null===(n=t[0])||void 0===n?void 0:n.content)}var $=o.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24px",viewBox:"0 0 24 24",width:"24px"},o.a.createElement("g",null,o.a.createElement("path",{d:"M0,0h24v24H0V0z",fill:"none"})),o.a.createElement("g",null,o.a.createElement("g",null,o.a.createElement("path",{d:"M18,4v5H6V4H18 M18,2H6C4.9,2,4,2.9,4,4v5c0,1.1,0.9,2,2,2h12c1.1,0,2-0.9,2-2V4C20,2.9,19.1,2,18,2z M18,15v5H6v-5H18 M18,13H6c-1.1,0-2,0.9-2,2v5c0,1.1,0.9,2,2,2h12c1.1,0,2-0.9,2-2v-5C20,13.9,19.1,13,18,13z"}))));function ee(){return $}var te=o.a.createElement(ee,null);function ne(e){var t,n,r=e.theme,i=e.companionWindowActive;return o.a.createElement("div",{style:{display:"flex",fill:i?(null==r||null===(t=r.palette)||void 0===t||null===(n=t.primary)||void 0===n?void 0:n.main)||"#000000":"#757575"}},te)}ne.value="LayersCurtain";var re={name:"LayersCurtain",target:"WindowSideBarButtons",component:ne,mode:"add",mapStateToProps:function(e){return{theme:K(e),companionWindowActive:Q(e)}}},ie=n(92),ae=n.n(ie),oe=o.a.createElement("span",null),le=[q,re,{target:"OpenSeadragonViewer",component:function(e){function t(t){return e.call(this,t)||this}Object(r.a)(t,e);var n=t.prototype;return n.componentDidMount=function(){},n.componentDidUpdate=function(e){var t=this.props,n=t.viewer.world,r=t.layerMetadata,i=t.layersOrientation;if(n&&r){for(var a=[],o=0;o<n.getItemCount();o+=1)a.push(n.getItemAt(o));a.forEach((function(e,t){for(var n={clip:1},a=Object.keys(r),o=0;o<a.length;o++)if(a[o].includes(e.source["@id"])){n=r[a[o]];break}var l=e.getContentSize(),s=i?new ae.a.Rect(0,0,l.x,l.y*n.clip):new ae.a.Rect(0,0,l.x*n.clip,l.y);e.setClip(s)}))}},n.render=function(){return oe},t}(a.Component),mapStateToProps:function(e,t){var n,r,i,a,o=t.windowId,l=Object(W.l)(e,{windowId:o})[0];return{layerMetadata:null===(n=e.layersCurtain)||void 0===n||null===(r=n[o])||void 0===r?void 0:r[l],layersOrientation:null===(i=e.layersCurtain)||void 0===i||null===(a=i.orientation)||void 0===a?void 0:a[o]}},mode:"add"}],se=n(73),ce=n(33),ue=n(377),de=n(427),pe=n.n(de),he=n(428),me=n.n(he),fe=n(233),ve={updateViewport:ue.d},ye=o.a.createElement(pe.a,null),ge=o.a.createElement(me.a,null),be=o.a.createElement(fe.a,null);var we={name:"CustomWindowCanvasNavigationControls",target:"WindowCanvasNavigationControls",component:function(e){var t=e.windowId,n=e.updateViewport,r=e.viewer,i=e.showZoomControls,a=e.zoomToWorld;return i?o.a.createElement("div",{style:{display:"flex",flexDirection:"column",justifyContent:"center",alignContent:"center",position:"absolute",right:0,height:"100%",margin:"8px"}},o.a.createElement("div",{className:"olamalu-navigation-controls",style:{display:"flex",flexDirection:"column",backgroundColor:"rgba(255, 255, 255, 0.8)",borderRadius:"50px",zIndex:50}},o.a.createElement(D.a,{"aria-label":"Zoom in",onClick:function(){n(t,{zoom:2*r.zoom})}},ye),o.a.createElement(D.a,{"aria-label":"Zoom out",onClick:function(){n(t,{zoom:r.zoom/2})}},ge),o.a.createElement(D.a,{"aria-label":"Recet zoom",onClick:a},be))):o.a.createElement(o.a.Fragment,null)},mapStateToProps:function(e,t){var n=t.windowId;return{showZoomControls:Object(se.f)(e),viewer:Object(ce.d)(e,{windowId:n})}},mapDispatchToProps:ve,mode:"wrap"},Ee=n(430),xe=n.n(Ee),ke=n(429),Ie={imperial:[{conversionFactor:25.4,labelFactors:[1e-9,1e-6,.001,.01,1],unit:"in"},{conversionFactor:25.4*12,labelFactors:[1],unit:"ft"},{conversionFactor:25.4*12*5280,labelFactors:[1e-6,.001,.1,1,10,100,1e3,1e6],unit:"ml"}],metric:[{conversionFactor:1e-6,labelFactors:[.1,1,10,1e3,1e4],unit:"nm"},{conversionFactor:.001,labelFactors:[1,10],unit:"μm"},{conversionFactor:.1,labelFactors:[.1,1],unit:"mm"},{conversionFactor:10,labelFactors:[1,10],unit:"cm"},{conversionFactor:1e3,labelFactors:[1,10,100],unit:"m"},{conversionFactor:1e6,labelFactors:[.1,1,10,100,1e3,1e3],unit:"km"},{conversionFactor:94607304725808e3,labelFactors:[1e-9,1e-6,.001,1,1e3,1e6,1e9],unit:"ly"}]},Ce="horizontal",Oe="vertical",Le={BOTTOM_LEFT:[0,1],BOTTOM_RIGHT:[1,1],TOP_LEFT:[0,0],TOP_RIGHT:[1,0]},ze={"bottom-left":Le.BOTTOM_LEFT,"bottom-right":Le.BOTTOM_RIGHT,"top-left":Le.TOP_LEFT,"top-right":Le.TOP_RIGHT},Se=function(){function e(e){if(!(e=e||{}).viewer)throw new Error("A viewer must be specified.");this.viewer=e.viewer,this.location=ze[e.location||"bottom-left"],this.smallDashSize=e.smallDashSize||10,this.largeDashSize=e.largeDashSize||15,this.pixelsPerMillimeter=e.pixelsPerMillimeter,this.labelsEvery=e.labelsEvery||5,this.imperialUnits=e.imperialUnits||!1,this.color=e.color||"#ffffff",this.labelPrecision=e.labelPrecision||3,this.canvas=document.createElement("canvas",null,null),this.elements={horizontal:this.makeRulerElements(Ce),unit:this.makeUnitElement(),vertical:this.makeRulerElements(Oe)},this.parentElement=document.createElement("div"),this.parentElement.className="plugin-ruler",this.parentElement.appendChild(this.elements.horizontal.ruler),this.parentElement.appendChild(this.elements.vertical.ruler),this.parentElement.appendChild(this.elements.unit),this.viewer.container=document.querySelector("#"+e.viewer.id+" .openseadragon-container"),this.viewer.container.appendChild(this.parentElement),this.parentElement.style.visibility=e.show?"visible":"hidden"}var t=e.prototype;return t.refresh=function(e){if(e&&e.viewportToImageZoom&&e!==this.tiledImage&&(this.tiledImage=e),this.tiledImage){var t=this.viewer.viewport,n=this.tiledImage.viewportToImageZoom(t.getZoom(!0))*this.pixelsPerMillimeter;this.updateScales(n)}},t.updateScales=function(e){var t=this.getScalesInfo(e);this.elements.horizontal.small.style.backgroundSize=Math.round(t.small)+"px 100%",this.elements.horizontal.large.style.backgroundSize=Math.round(t.small)*t.largeFactor+"px 100%",this.elements.vertical.small.style.backgroundSize="100% "+Math.round(t.small)+"px",this.elements.vertical.large.style.backgroundSize="100% "+Math.round(t.small)*t.largeFactor+"px",this.elements.unit.text!==t.unit&&(this.elements.unit.textContent=t.unit),this.updateLabels(Ce,t),this.updateLabels(Oe,t)},t.updateLabels=function(e,t){var n,r=this;n=e===Oe?Math.ceil(this.viewer.viewport.containerSize.y/(Math.round(t.small)*t.largeFactor)/this.labelsEvery):Math.ceil(this.viewer.viewport.containerSize.x/(Math.round(t.small)*t.largeFactor)/this.labelsEvery);var i=this.elements[e].labels;if(i.length<n)for(;i.length<n;){var a=document.createElement("span");a.className="ruler-label",a.style.color=this.color,a.style.position="absolute",1===this.location[0]&&e===Ce&&(a.style.transform+=" scaleX(-1)"),1===this.location[1]&&(a.style.transform+=" scaleY(-1)"),i.push(a),this.elements[e].ruler.appendChild(a)}else if(i.length>n){var o=i.length-n;i.slice(-o).forEach((function(e){e.remove()})),this.elements[e].labels=i.slice(0,n)}var l=this.canvas.getContext("2d");l.font="'Open Sans', 'Lucida Grande', Verdana, Arial, sans-serif",i.forEach((function(n,i){if(0!==i){var a,o=i*t.labelFactor*r.labelsEvery;if(o<1e-4||o>1e4?(n.style.whiteSpace="nowrap",a=o.toExponential(r.labelPrecision)):a=Number(o.toFixed(r.labelPrecision)),e===Oe){0===r.location[0]?n.style.left=1.5*r.largeDashSize+"px":n.style.right=1.5*r.largeDashSize+"px";var s=r.labelsEvery*i*Math.round(t.small)*t.largeFactor-8.5+"px";n.style.top=s}else{var c=l.measureText(a).width,u=r.labelsEvery*i*Math.round(t.small)*t.largeFactor-c/1+"px";n.style.top=1.5*r.largeDashSize+"px",n.style.left=u}n.textContent=a}}),this)},t.updateSize=function(){this.elements.horizontal.small.style.width=this.viewer.viewport.containerSize.x+"px",this.elements.horizontal.large.style.width=this.viewer.viewport.containerSize.x+"px",this.elements.vertical.small.style.height=this.viewer.viewport.containerSize.y+"px",this.elements.vertical.large.style.height=this.viewer.viewport.containerSize.y+"px"},t.unregister=function(){var e=this;this.viewer.container.removeChild(this.parentElement),this.handlers.forEach((function(t){e.viewer.removeHandler(t)}))},t.register=function(){var e=this;this.handlers=[this.viewer.addHandler("open",(function(){e.refresh(),e.updateSize()})),this.viewer.addHandler("animation",(function(){e.refresh()})),this.viewer.addHandler("resize",(function(){e.refresh(),e.updateSize()}))]},t.hide=function(){this.parentElement.style.visibility="hidden"},t.show=function(){this.parentElement.style.visibility="visible"},t.makeUnitElement=function(){var e=document.createElement("span",null,null);e.className="ruler-unit";var t=1.25*this.largeDashSize+"px";return e.style.position="absolute",0===this.location[0]?e.style.left=t:e.style.right=t,0===this.location[1]?e.style.top=t:e.style.bottom=t,e.style.color=this.color,e},t.makeRulerElements=function(e){var t=document.createElement("div",null,null);t.style.position="absolute",t.style.transition="all 0.1s ease-in";var n=document.createElement("div",null,null);n.style.position="absolute",n.style.backgroundRepeat="repeat";var r=document.createElement("div",null,null);return r.style.position="absolute",r.style.backgroundRepeat="repeat",0===this.location[0]?(e===Ce&&(t.style.marginLeft=this.largeDashSize+"px"),t.style.left=0):(e===Ce?(t.style.marginRight=this.largeDashSize+"px",t.style.transform+=" scaleX(-1)"):(n.style.right=0,r.style.right=0),t.style.right=0),0===this.location[1]?(e===Oe&&(t.style.marginTop=this.largeDashSize+"px"),t.style.top=0):(e===Oe&&(t.style.marginBottom=this.largeDashSize+"px"),t.style.bottom=0,t.style.transform+=" scaleY(-1)"),e===Ce?(n.style.height=this.smallDashSize+"px",n.style.backgroundImage="linear-gradient(to left, "+this.color+" 1px, rgba(0, 0, 0, 0) 0px)",n.style.backgroundImage="-moz-linear-gradient(left, "+this.color+" 1px, rgba(0, 0, 0, 0) 0px)",n.style.backgroundImage="-webkit-linear-gradient(left, "+this.color+" 1px, rgba(0, 0, 0, 0) 0px)",r.style.height=this.largeDashSize+"px",r.style.backgroundImage="linear-gradient(to left, "+this.color+" 2px, rgba(0, 0, 0, 0) 0px)",r.style.backgroundImage="-moz-linear-gradient(left, "+this.color+" 2px, rgba(0, 0, 0, 0) 0px)",r.style.backgroundImage="-webkit-linear-gradient(left, "+this.color+" 2px, rgba(0, 0, 0, 0) 0px)"):(n.style.width=this.smallDashSize+"px",n.style.backgroundImage="linear-gradient(to top, "+this.color+" 1px, rgba(0, 0, 0, 0) 0px)",n.style.backgroundImage="-moz-linear-gradient(top, "+this.color+" 1px, rgba(0, 0, 0, 0) 0px)",n.style.backgroundImage="-webkit-linear-gradient(top, "+this.color+" 1px, rgba(0, 0, 0, 0) 0px)",r.style.width=this.largeDashSize+"px",r.style.backgroundImage="linear-gradient(to top, "+this.color+" 2px, rgba(0, 0, 0, 0) 0px)",r.style.backgroundImage="-moz-linear-gradient(top, "+this.color+" 2px, rgba(0, 0, 0, 0) 0px)",r.style.backgroundImage="-webkit-linear-gradient(top, "+this.color+" 2px, rgba(0, 0, 0, 0) 0px)"),t.appendChild(n),t.appendChild(r),{labels:[],large:r,ruler:t,small:n}},t.getScalesInfo=function(e){var t=this,n=function(t,n,r){return t*e*r/n},r=function(e,n){return t.imperialUnits&&"in"===e.unit&&1===n?8:10},i=(this.imperialUnits?Ie.imperial:Ie.metric).find((function(e){var t=e.labelFactors.slice(-1)[0],i=r(e,t);return n(e.conversionFactor,i,t)>2})),a=i.labelFactors.find((function(e){var t=r(i,e);return n(i.conversionFactor,t,e)>2})),o=r(i,a);return{labelFactor:a,largeFactor:o,small:i.conversionFactor*a*e*(1/o),unit:i.unit}},Object(ke.a)(e,[{key:"PixelsPerMillimeter",get:function(){return this.pixelsPerMillimeter},set:function(e){this.pixelsPerMillimeter=e}}]),e}(),je=n(431),Te=n.n(je),Fe=function(e){function t(t){var n;return(n=e.call(this,t)||this).onMenuButtonClicked=n.onMenuButtonClicked.bind(Object(d.a)(n)),n.show=!1,n}Object(r.a)(t,e);var n=t.prototype;return n.componentDidMount=function(){},n.componentDidUpdate=function(e){this.props.viewer&&this.attachRuler()},n.attachRuler=function(){var e,t,n,r=this,i=this.props,a=i.viewer,o=i.canvasWorld;console.log("canvasWorld",o);var l=null==o||null===(e=o.canvases[0])||void 0===e||null===(t=e.canvas)||void 0===t||null===(n=t.__jsonld)||void 0===n?void 0:n.physicalDimensions;if(l&&"http://iiif.io/api/annex/extensions/physdim"===l.profile){var s=1/({cm:10,in:25.4,mm:1}[l.physicalUnits]*l.physicalScale);this.ruler=this.ruler||new Se({viewer:a,show:!0,location:"bottom-left",labelsEvery:1}),this.ruler.PixelsPerMillimeter=s,this.ruler.register(),a.addHandler("tile-loaded",(function(e){r.ruler.updateSize(),r.ruler.refresh(e.tiledImage)})),this.show=!0}},n.onMenuButtonClicked=function(e){this.show?(this.show=!1,this.ruler.hide()):(this.show=!0,this.ruler.show())},n.render=function(){var e=this.props,t=e.show,n=e.classes;return o.a.createElement("div",{className:"MuiPaper-elevation4 "+n.root},o.a.createElement(D.a,{onClick:this.onMenuButtonClicked},o.a.createElement(xe.a,{title:t?"show ruler":"hide ruler"})))},t}(a.Component),Me=[le,[we,{name:"PhysicalRuler",target:"OpenSeadragonViewer",component:Te()((function(){return{root:{borderRadius:25,position:"absolute",top:64,right:8,zIndex:999,display:"flex",backgroundColor:"rgba(255, 255, 255, 0.8)"}}}))(Fe),mode:"add"}]],_e=function(){return o.a.createElement(o.a.Fragment,null,o.a.createElement("ul",{className:"main-menu"},[{link:"https://unlocking-miniatures.fitzmuseum.cam.ac.uk/",title:"Home"},{link:"https://unlocking-miniatures.fitzmuseum.cam.ac.uk/collections",title:"Collections"}].map((function(e){return o.a.createElement("li",{key:e.link},o.a.createElement("a",{href:e.link},e.title))}))))},Pe=o.a.createElement("h4",null,"Quick links"),De=o.a.createElement("h4",null,"Contact"),Re=o.a.createElement("div",{className:"footer--logo"}),Ne=o.a.createElement("div",{className:"footer--copyright"},o.a.createElement("a",{href:"#"},"Copyright University of Cambridge"),o.a.createElement("a",{href:"#"},"Privacy policy")),He=function(){var e={quickLinks:[{link:"https://unlocking-miniatures.fitzmuseum.cam.ac.uk/",title:"Home"},{link:"https://unlocking-miniatures.fitzmuseum.cam.ac.uk/collections",title:"Collections"}],contact:[{line:"The Fitzwilliam Museum"},{line:"University of Cambridge"}],footerLogos:[{image_src:"../../content/assets/main-banner-image.png",image_alt:"Logo"}],socialMedia:[{type:"twitter",url:"https://www.twitter.com/fitzwilliam",title:"@FitzProjectHandle"},{type:"youtube",url:"https://www.youtube.com/c/FitzMuseum",title:"on YouTube"}]};return o.a.createElement("div",{className:"footer"},o.a.createElement("div",{className:"footer--social-media"},e.socialMedia.map((function(e){return o.a.createElement("a",{href:null==e?void 0:e.url},e.title)}))),o.a.createElement("div",{className:"footer--main"},o.a.createElement("div",{className:"footer--quick-links"},Pe,o.a.createElement("ul",null,e.quickLinks.map((function(e){return o.a.createElement("li",null,o.a.createElement("a",{href:null==e?void 0:e.link},e.title))})))),o.a.createElement("div",{className:"footer--contact"},De,o.a.createElement("ul",null,e.contact.map((function(e){return o.a.createElement("li",null,null==e?void 0:e.line)})))),Re),Ne)},Be=n(432),Ae=(n(654),[{element:'button[role="tab"][aria-label="Annotations"]',title:"Annotations",intro:"View annotations and open micrograph images"},{element:'button[role="tab"][aria-label="Layers"]',title:"Layers",intro:"Control opacity of individual layers"},{element:'button[role="tab"][aria-label="Layers Curtain"]',title:"Layers Curtain",intro:"View layers side be side with the curtain slider"},{element:".olamalu-navigation-controls",title:"Navigation controls",intro:"Zoom in and out with these controls, mouse scroll or touch input"},{element:'#addBtn[aria-label="Add resource"]',title:"Add resource",intro:"Add and compare another resource"}]),Ve=null;var Ge=o.a.createElement(o.a.Fragment,null),Ue=function(e){function t(){return e.apply(this,arguments)||this}Object(r.a)(t,e);var n=t.prototype;return n.componentDidMount=function(){Ve=setInterval((function(){Ve&&document.querySelector(Ae[0].element)&&(clearInterval(Ve),Ve=null,Object(Be.a)().setOptions({steps:Ae}).start())}),2e3)},n.render=function(){return Ge},t}(a.Component);n(655);function We(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */We=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},i=r.iterator||"@@iterator",a=r.asyncIterator||"@@asyncIterator",o=r.toStringTag||"@@toStringTag";function l(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(e){l=function(e,t,n){return e[t]=n}}function s(e,t,n,r){var i=t&&t.prototype instanceof d?t:d,a=Object.create(i.prototype),o=new k(r||[]);return a._invoke=function(e,t,n){var r="suspendedStart";return function(i,a){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===i)throw a;return C()}for(n.method=i,n.arg=a;;){var o=n.delegate;if(o){var l=w(o,n);if(l){if(l===u)continue;return l}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var s=c(e,t,n);if("normal"===s.type){if(r=n.done?"completed":"suspendedYield",s.arg===u)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(r="completed",n.method="throw",n.arg=s.arg)}}}(e,n,o),a}function c(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=s;var u={};function d(){}function p(){}function h(){}var m={};l(m,i,(function(){return this}));var f=Object.getPrototypeOf,v=f&&f(f(I([])));v&&v!==t&&n.call(v,i)&&(m=v);var y=h.prototype=d.prototype=Object.create(m);function g(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function b(e,t){var r;this._invoke=function(i,a){function o(){return new t((function(r,o){!function r(i,a,o,l){var s=c(e[i],e,a);if("throw"!==s.type){var u=s.arg,d=u.value;return d&&"object"==typeof d&&n.call(d,"__await")?t.resolve(d.__await).then((function(e){r("next",e,o,l)}),(function(e){r("throw",e,o,l)})):t.resolve(d).then((function(e){u.value=e,o(u)}),(function(e){return r("throw",e,o,l)}))}l(s.arg)}(i,a,r,o)}))}return r=r?r.then(o,o):o()}}function w(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,w(e,t),"throw"===t.method))return u;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return u}var r=c(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,u;var i=r.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,u):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,u)}function E(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function x(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function k(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(E,this),this.reset(!0)}function I(e){if(e){var t=e[i];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,a=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return a.next=a}}return{next:C}}function C(){return{value:void 0,done:!0}}return p.prototype=h,l(y,"constructor",h),l(h,"constructor",p),p.displayName=l(h,o,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===p||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,h):(e.__proto__=h,l(e,o,"GeneratorFunction")),e.prototype=Object.create(y),e},e.awrap=function(e){return{__await:e}},g(b.prototype),l(b.prototype,a,(function(){return this})),e.AsyncIterator=b,e.async=function(t,n,r,i,a){void 0===a&&(a=Promise);var o=new b(s(t,n,r,i),a);return e.isGeneratorFunction(n)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},g(y),l(y,o,"Generator"),l(y,i,(function(){return this})),l(y,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=I,k.prototype={constructor:k,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return o.type="throw",o.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],o=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var l=n.call(a,"catchLoc"),s=n.call(a,"finallyLoc");if(l&&s){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(l){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var a=i;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=e,o.arg=t,a?(this.method="next",this.next=a.finallyLoc,u):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),u},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),x(n),u}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;x(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:I(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),u}},e}function Ze(){return(Ze=Object(i.a)(We().mark((function e(t){var n,r,i,a;return We().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=[],Array.isArray(t)&&t.forEach((function(e){n.push({manifestId:e})})),e.next=4,fetch("https://unlocking-miniatures.fitz.ms/items/miniatures/?fields%5B%5D=accession_number");case 4:return r=e.sent,e.next=7,r.json();case 7:i=e.sent.data,a=i.map((function(e){return{manifestId:"https://miniatures-iiif.fitzmuseum.cam.ac.uk/"+e.accession_number+"/manifest.json"}})),n.length<1&&n.push(a[0]),s.a.viewer(Object.assign({},c,{windows:n,catalog:a}),Me);case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var qe=o.a.createElement(_e,null),Ye=o.a.createElement(He,null),Je=o.a.createElement(Ue,null),Xe=function(e){function t(){return e.apply(this,arguments)||this}Object(r.a)(t,e);var n=t.prototype;return n.componentDidMount=function(){!function(e){Ze.apply(this,arguments)}(new URLSearchParams(document.location.search).getAll("manifestId[]"))},n.render=function(){return o.a.createElement(o.a.Fragment,null,qe,o.a.createElement("div",{className:"main-content"},o.a.createElement("div",{id:c.id})),Ye,Je)},t}(a.Component);Object(l.render)(o.a.createElement(Xe,null),document.querySelector("#app"))}},[[517,2,0]]]);
//# sourceMappingURL=app.4701c784.js.map