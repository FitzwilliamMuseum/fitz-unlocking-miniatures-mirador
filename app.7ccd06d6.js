(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{517:function(e,t,n){e.exports=n(734)},655:function(e,t,n){},734:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return Xe}));var a=n(72),r=n(417),i=n(0),o=n.n(i),l=n(27),s=n(491),c={id:"mirador-root",windows:[],selectedTheme:"fitzwilliam",themes:{fitzwilliam:{palette:{type:"light",primary:{main:"#000000"},shades:{dark:"#000000"}}}},window:{sideBarOpen:!0,allowClose:!0,defaultSideBarPanel:"LayersCurtain",allowTopMenuButton:!1,allowFullscreen:!0,allowMaximize:!0,panels:{info:!0,attribution:!0,canvas:!1,annotations:!0,search:!1,layers:!0}},workspace:{showZoomControls:!0},workspaceControlPanel:{enabled:!0},translations:{en:{openCompanionWindow_LayersCurtain:"Layers Curtain",addManifestUrlHelp:"The URL of a IIIF resource manifest (JSON file). Copy and paste it here"}},requests:{postprocessors:[function(e,t){t.json&&"http://iiif.io/api/image/3/context.json"==t.json["@context"]&&(t.json.id=t.json.id.replace("http://","https://"))}]},catalog:[]},u=n(170),d=n(101),p=n(43),m=n(77),h=n(800),f=n(215),v=n.n(f),y=n(147),g=n.n(y),b=n(148),w=n.n(b),E=n(226),x=n.n(E),k=n(172),C=n(102),I={paddingRight:"4px"},O={display:"flex",backgroundColor:"#f5f5f5",alignItems:"center",borderRight:"0.5px solid rgba(0, 0, 0, 0.12)"},z={padding:"16px 8px 8px 8px",width:"100%"},L={display:"flex"},S=o.a.createElement(v.a,null),j=o.a.createElement(g.a,null),T=o.a.createElement(w.a,null),_=o.a.createElement(x.a,null),F=function(e){function t(t){var n;return(n=e.call(this,t)||this).handleclipChange=n.handleclipChange.bind(Object(d.a)(n)),n}Object(a.a)(t,e);var n=t.prototype;return n.handleclipChange=function(e,t){var n,a=this.props,r=a.canvasId,i=a.layersOpacityReset,o=a.updateLayersCurtain,l=a.windowId;i(),o(l,r,((n={})[e]={clip:t/100},n))},n.render=function(){var e=this,t=this.props,n=t.layer,a=t.resource,r=t.index,i=t.toggleLayerVisibility,l=t.moveToTop,s=o.a.createElement(m.a,{maxHeight:void 0,maxWidth:50,resource:a,style:I}),c=o.a.createElement(k.a,{size:"small","aria-label":"Move layer to top",onClick:l},_);return o.a.createElement(C.b,{key:n.id,draggableId:n.id,index:r},(function(t,r){return o.a.createElement("div",Object(u.a)({ref:t.innerRef},t.draggableProps,{style:(l=r.isDragging,d=t.draggableProps.style,Object.assign({userSelect:"none",background:l?"#ecececec":"#ffffff",width:"100%",borderBottom:"0.5px solid rgba(0, 0, 0, 0.12)",paddingRight:"24px",display:"flex"},d))}),o.a.createElement("div",Object(u.a)({},t.dragHandleProps,{style:O}),S),o.a.createElement("div",{style:z},o.a.createElement("div",{style:L},s,o.a.createElement("div",null,o.a.createElement("div",null,n.label||n.id),o.a.createElement(k.a,{size:"small","aria-label":n.visibility?"Hide layer":"Show layer",onClick:i},n.visibility?j:T),0!==n.index&&c)),o.a.createElement(h.a,{disabled:!n.visibility,value:100*n.clip,onChange:function(t,n){return e.handleclipChange(a.id,n)}})));var l,d}))},t}(i.Component),M=n(746),P=n(747),D=n(740),R=n(426),N=n.n(R),B=function(e,t,n){var a=Array.from(e),r=a.splice(t,1)[0];return a.splice(n,0,r),a},H={paddingLeft:"16px"},A={padding:"0px",height:"75vh"},V={padding:"0px"},G=o.a.createElement("span",null,"Orientation"),U=function(e){function t(t){var n;return(n=e.call(this,t)||this).onDragEnd=n.onDragEnd.bind(Object(d.a)(n)),n.layersOpacityReset=n.layersOpacityReset.bind(Object(d.a)(n)),n.setLayerVisibility=n.setLayerVisibility.bind(Object(d.a)(n)),n.moveToTop=n.moveToTop.bind(Object(d.a)(n)),n.droppableId="droppable",n}Object(a.a)(t,e);var n=t.prototype;return n.onDragEnd=function(e){var t=this.props,n=t.canvasId,a=t.layers,r=t.updateLayers,i=t.windowId;if(e.destination&&e.destination.droppableId===this.droppableId&&e.source.droppableId===this.droppableId){var o=B(a.map((function(e){return e.id})),e.source.index,e.destination.index);r(i,n,a.reduce((function(e,t){return e[t.id]={index:o.indexOf(t.id)},e}),{}))}},n.layersOpacityReset=function(){var e=this.props,t=e.windowId,n=e.canvasId,a=e.layers,r=e.updateLayers,i={};a.map((function(e){i[e.id]={opacity:1}})),r(t,n,i)},n.setLayerVisibility=function(e,t){var n,a=this.props,r=a.canvasId;(0,a.updateLayers)(a.windowId,r,((n={})[e]={visibility:t},n))},n.moveToTop=function(e){var t=this.props,n=t.canvasId,a=t.layers,r=t.updateLayers,i=t.windowId,o=B(a.map((function(e){return e.id})),a.findIndex((function(t){return t.id===e})),0);r(i,n,a.reduce((function(e,t){return e[t.id]={index:o.indexOf(t.id)},e}),{}))},n.render=function(){var e=this,t=this.props,n=t.canvasId,a=t.id,r=t.windowId,i=t.layerMetadata,l=t.customLayerMetadata,s=t.layers,c=t.updateLayersCurtain,d=t.toggleOrientation,m=t.layersOrientation;return o.a.createElement("div",null,o.a.createElement(p.a,{title:"Layers Curtain",windowId:r,id:a},o.a.createElement("div",{style:H},G,o.a.createElement(D.a,{className:"olamalu-layers-curtain-orientation",onClick:function(){return d(r)}},o.a.createElement(N.a,{"aria-label":"layers orientation",disabled:!0,color:"primary",style:{transform:m?"rotate(90deg)":""}}))),o.a.createElement(C.a,{onDragEnd:this.onDragEnd},o.a.createElement(C.c,{droppableId:this.droppableId},(function(t,a){return o.a.createElement(M.a,Object(u.a)({},t.droppableProps,{ref:t.innerRef,style:A}),s.map((function(t,a){var s,u,d,p=Object.assign({clip:1,visibility:!0,id:t.id,label:null==t||null===(s=t.__jsonld)||void 0===s||null===(u=s.label)||void 0===u||null===(d=u.en)||void 0===d?void 0:d[0]},(i||{})[t.id],(l||{})[t.id]);return o.a.createElement(P.a,{style:V,key:t.id},o.a.createElement(F,{index:a,layer:p,resource:t,windowId:r,canvasId:n,layersOpacityReset:e.layersOpacityReset,updateLayersCurtain:c,toggleLayerVisibility:function(){return e.setLayerVisibility(t.id,!p.visibility)},moveToTop:function(){return e.moveToTop(t.id)}}))})),t.placeholder)})))))},t}(i.Component);var W=n(42),Z=n(212),q={companionWindowKey:"LayersCurtain",component:U,mapDispatchToProps:{updateLayers:n(383).a,updateLayersCurtain:function(e,t,n){return{canvasId:t,payload:n,type:"olamalu/custom_layers_update_layers",windowId:e}},toggleOrientation:function(e){return{type:"olamalu/custom_layers_orientation",windowId:e}}},mapStateToProps:function(e,t){var n,a,r,i,o=t.windowId,l=Object(W.l)(e,{windowId:o})[0];return{canvasId:l,customLayerMetadata:null==e||null===(n=e.layersCurtain)||void 0===n||null===(a=n[o])||void 0===a?void 0:a[l],layers:Object(Z.d)(e,{canvasId:l,windowId:o}),layerMetadata:Object(Z.b)(e,{canvasId:l,windowId:o}),layersOrientation:!!(null===(r=e.layersCurtain)||void 0===r||null===(i=r.orientation)||void 0===i?void 0:i[o])}},reducers:{layersCurtain:function(e,t){var n,a,r,i,o,l;switch(void 0===e&&(e={}),t.type){case"olamalu/custom_layers_update_layers":return Object.assign({},e,((r={})[t.windowId]=Object.assign({},e[t.windowId],((a={})[t.canvasId]=Object.assign({},null===(n=e[t.windowId])||void 0===n?void 0:n[t.canvasId],t.payload),a)),r));case"olamalu/custom_layers_orientation":return Object.assign({},e,{orientation:Object.assign({},e.orientation,(l={},l[t.windowId]=!(null===(i=e)||void 0===i||null===(o=i.orientation)||void 0===o?void 0:o[t.windowId]),l))});default:return e}}}},Y=n(74),J=n.n(Y),X=n(492);function K(e){return Object(X.b)(J()(e.config.theme,e.config.themes[e.config.selectedTheme]))}function Q(e){var t,n;return"LayersCurtain"===(null===(t=Object.values(e.companionWindows).filter((function(e){return"left"===e.position})))||void 0===t||null===(n=t[0])||void 0===n?void 0:n.content)}var $=o.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24px",viewBox:"0 0 24 24",width:"24px"},o.a.createElement("g",null,o.a.createElement("path",{d:"M0,0h24v24H0V0z",fill:"none"})),o.a.createElement("g",null,o.a.createElement("g",null,o.a.createElement("path",{d:"M18,4v5H6V4H18 M18,2H6C4.9,2,4,2.9,4,4v5c0,1.1,0.9,2,2,2h12c1.1,0,2-0.9,2-2V4C20,2.9,19.1,2,18,2z M18,15v5H6v-5H18 M18,13H6c-1.1,0-2,0.9-2,2v5c0,1.1,0.9,2,2,2h12c1.1,0,2-0.9,2-2v-5C20,13.9,19.1,13,18,13z"}))));function ee(){return $}var te=o.a.createElement(ee,null);function ne(e){var t,n,a=e.theme,r=e.companionWindowActive;return o.a.createElement("div",{style:{display:"flex",fill:r?(null==a||null===(t=a.palette)||void 0===t||null===(n=t.primary)||void 0===n?void 0:n.main)||"#000000":"#757575"}},te)}ne.value="LayersCurtain";var ae={name:"LayersCurtain",target:"WindowSideBarButtons",component:ne,mode:"add",mapStateToProps:function(e){return{theme:K(e),companionWindowActive:Q(e)}}},re=n(92),ie=n.n(re),oe=o.a.createElement("span",null),le=[q,ae,{target:"OpenSeadragonViewer",component:function(e){function t(t){return e.call(this,t)||this}Object(a.a)(t,e);var n=t.prototype;return n.componentDidMount=function(){},n.componentDidUpdate=function(e){var t=this.props,n=t.viewer.world,a=t.layerMetadata,r=t.layersOrientation;if(n&&a){for(var i=[],o=0;o<n.getItemCount();o+=1)i.push(n.getItemAt(o));i.forEach((function(e,t){for(var n={clip:1},i=Object.keys(a),o=0;o<i.length;o++)if(i[o].includes(e.source["@id"])){n=a[i[o]];break}var l=e.getContentSize(),s=r?new ie.a.Rect(0,0,l.x,l.y*n.clip):new ie.a.Rect(0,0,l.x*n.clip,l.y);e.setClip(s)}))}},n.render=function(){return oe},t}(i.Component),mapStateToProps:function(e,t){var n,a,r,i,o=t.windowId,l=Object(W.l)(e,{windowId:o})[0];return{layerMetadata:null===(n=e.layersCurtain)||void 0===n||null===(a=n[o])||void 0===a?void 0:a[l],layersOrientation:null===(r=e.layersCurtain)||void 0===r||null===(i=r.orientation)||void 0===i?void 0:i[o]}},mode:"add"}],se=n(73),ce=n(33),ue=n(377),de=n(427),pe=n.n(de),me=n(428),he=n.n(me),fe=n(233),ve={updateViewport:ue.d},ye=o.a.createElement(pe.a,null),ge=o.a.createElement(he.a,null),be=o.a.createElement(fe.a,null);var we={name:"CustomWindowCanvasNavigationControls",target:"WindowCanvasNavigationControls",component:function(e){var t=e.windowId,n=e.updateViewport,a=e.viewer,r=e.showZoomControls,i=e.zoomToWorld;return r?o.a.createElement("div",{style:{display:"flex",flexDirection:"column",justifyContent:"center",alignContent:"center",position:"absolute",right:0,height:"100%",margin:"8px"}},o.a.createElement("div",{className:"olamalu-navigation-controls",style:{display:"flex",flexDirection:"column",backgroundColor:"rgba(255, 255, 255, 0.8)",borderRadius:"50px",zIndex:50}},o.a.createElement(D.a,{"aria-label":"Zoom in",onClick:function(){n(t,{zoom:2*a.zoom})}},ye),o.a.createElement(D.a,{"aria-label":"Zoom out",onClick:function(){n(t,{zoom:a.zoom/2})}},ge),o.a.createElement(D.a,{"aria-label":"Recet zoom",onClick:i},be))):o.a.createElement(o.a.Fragment,null)},mapStateToProps:function(e,t){var n=t.windowId;return{showZoomControls:Object(se.f)(e),viewer:Object(ce.d)(e,{windowId:n})}},mapDispatchToProps:ve,mode:"wrap"},Ee=n(430),xe=n.n(Ee),ke=n(429),Ce={imperial:[{conversionFactor:25.4,labelFactors:[1e-9,1e-6,.001,.01,1],unit:"in"},{conversionFactor:25.4*12,labelFactors:[1],unit:"ft"},{conversionFactor:25.4*12*5280,labelFactors:[1e-6,.001,.1,1,10,100,1e3,1e6],unit:"ml"}],metric:[{conversionFactor:1e-6,labelFactors:[.1,1,10,1e3,1e4],unit:"nm"},{conversionFactor:.001,labelFactors:[1,10],unit:"μm"},{conversionFactor:.1,labelFactors:[.1,1],unit:"mm"},{conversionFactor:10,labelFactors:[1,10],unit:"cm"},{conversionFactor:1e3,labelFactors:[1,10,100],unit:"m"},{conversionFactor:1e6,labelFactors:[.1,1,10,100,1e3,1e3],unit:"km"},{conversionFactor:94607304725808e3,labelFactors:[1e-9,1e-6,.001,1,1e3,1e6,1e9],unit:"ly"}]},Ie="horizontal",Oe="vertical",ze={BOTTOM_LEFT:[0,1],BOTTOM_RIGHT:[1,1],TOP_LEFT:[0,0],TOP_RIGHT:[1,0]},Le={"bottom-left":ze.BOTTOM_LEFT,"bottom-right":ze.BOTTOM_RIGHT,"top-left":ze.TOP_LEFT,"top-right":ze.TOP_RIGHT},Se=function(){function e(e){if(!(e=e||{}).viewer)throw new Error("A viewer must be specified.");this.viewer=e.viewer,this.location=Le[e.location||"bottom-left"],this.smallDashSize=e.smallDashSize||10,this.largeDashSize=e.largeDashSize||15,this.pixelsPerMillimeter=e.pixelsPerMillimeter,this.labelsEvery=e.labelsEvery||5,this.imperialUnits=e.imperialUnits||!1,this.color=e.color||"#ffffff",this.labelPrecision=e.labelPrecision||3,this.canvas=document.createElement("canvas",null,null),this.elements={horizontal:this.makeRulerElements(Ie),unit:this.makeUnitElement(),vertical:this.makeRulerElements(Oe)},this.parentElement=document.createElement("div"),this.parentElement.className="plugin-ruler",this.parentElement.appendChild(this.elements.horizontal.ruler),this.parentElement.appendChild(this.elements.vertical.ruler),this.parentElement.appendChild(this.elements.unit),this.viewer.container=document.querySelector("#"+e.viewer.id+" .openseadragon-container"),this.viewer.container.appendChild(this.parentElement),this.parentElement.style.visibility=e.show?"visible":"hidden"}var t=e.prototype;return t.refresh=function(e){if(e&&e.viewportToImageZoom&&e!==this.tiledImage&&(this.tiledImage=e),this.tiledImage){var t=this.viewer.viewport,n=this.tiledImage.viewportToImageZoom(t.getZoom(!0))*this.pixelsPerMillimeter;this.updateScales(n)}},t.updateScales=function(e){var t=this.getScalesInfo(e);this.elements.horizontal.small.style.backgroundSize=Math.round(t.small)+"px 100%",this.elements.horizontal.large.style.backgroundSize=Math.round(t.small)*t.largeFactor+"px 100%",this.elements.vertical.small.style.backgroundSize="100% "+Math.round(t.small)+"px",this.elements.vertical.large.style.backgroundSize="100% "+Math.round(t.small)*t.largeFactor+"px",this.elements.unit.text!==t.unit&&(this.elements.unit.textContent=t.unit),this.updateLabels(Ie,t),this.updateLabels(Oe,t)},t.updateLabels=function(e,t){var n,a=this;n=e===Oe?Math.ceil(this.viewer.viewport.containerSize.y/(Math.round(t.small)*t.largeFactor)/this.labelsEvery):Math.ceil(this.viewer.viewport.containerSize.x/(Math.round(t.small)*t.largeFactor)/this.labelsEvery);var r=this.elements[e].labels;if(r.length<n)for(;r.length<n;){var i=document.createElement("span");i.className="ruler-label",i.style.color=this.color,i.style.position="absolute",1===this.location[0]&&e===Ie&&(i.style.transform+=" scaleX(-1)"),1===this.location[1]&&(i.style.transform+=" scaleY(-1)"),r.push(i),this.elements[e].ruler.appendChild(i)}else if(r.length>n){var o=r.length-n;r.slice(-o).forEach((function(e){e.remove()})),this.elements[e].labels=r.slice(0,n)}var l=this.canvas.getContext("2d");l.font="'Open Sans', 'Lucida Grande', Verdana, Arial, sans-serif",r.forEach((function(n,r){if(0!==r){var i,o=r*t.labelFactor*a.labelsEvery;if(o<1e-4||o>1e4?(n.style.whiteSpace="nowrap",i=o.toExponential(a.labelPrecision)):i=Number(o.toFixed(a.labelPrecision)),e===Oe){0===a.location[0]?n.style.left=1.5*a.largeDashSize+"px":n.style.right=1.5*a.largeDashSize+"px";var s=a.labelsEvery*r*Math.round(t.small)*t.largeFactor-8.5+"px";n.style.top=s}else{var c=l.measureText(i).width,u=a.labelsEvery*r*Math.round(t.small)*t.largeFactor-c/1+"px";n.style.top=1.5*a.largeDashSize+"px",n.style.left=u}n.textContent=i}}),this)},t.updateSize=function(){this.elements.horizontal.small.style.width=this.viewer.viewport.containerSize.x+"px",this.elements.horizontal.large.style.width=this.viewer.viewport.containerSize.x+"px",this.elements.vertical.small.style.height=this.viewer.viewport.containerSize.y+"px",this.elements.vertical.large.style.height=this.viewer.viewport.containerSize.y+"px"},t.unregister=function(){var e=this;this.viewer.container.removeChild(this.parentElement),this.handlers.forEach((function(t){e.viewer.removeHandler(t)}))},t.register=function(){var e=this;this.handlers=[this.viewer.addHandler("open",(function(){e.refresh(),e.updateSize()})),this.viewer.addHandler("animation",(function(){e.refresh()})),this.viewer.addHandler("resize",(function(){e.refresh(),e.updateSize()}))]},t.hide=function(){this.parentElement.style.visibility="hidden"},t.show=function(){this.parentElement.style.visibility="visible"},t.makeUnitElement=function(){var e=document.createElement("span",null,null);e.className="ruler-unit";var t=1.25*this.largeDashSize+"px";return e.style.position="absolute",0===this.location[0]?e.style.left=t:e.style.right=t,0===this.location[1]?e.style.top=t:e.style.bottom=t,e.style.color=this.color,e},t.makeRulerElements=function(e){var t=document.createElement("div",null,null);t.style.position="absolute",t.style.transition="all 0.1s ease-in";var n=document.createElement("div",null,null);n.style.position="absolute",n.style.backgroundRepeat="repeat";var a=document.createElement("div",null,null);return a.style.position="absolute",a.style.backgroundRepeat="repeat",0===this.location[0]?(e===Ie&&(t.style.marginLeft=this.largeDashSize+"px"),t.style.left=0):(e===Ie?(t.style.marginRight=this.largeDashSize+"px",t.style.transform+=" scaleX(-1)"):(n.style.right=0,a.style.right=0),t.style.right=0),0===this.location[1]?(e===Oe&&(t.style.marginTop=this.largeDashSize+"px"),t.style.top=0):(e===Oe&&(t.style.marginBottom=this.largeDashSize+"px"),t.style.bottom=0,t.style.transform+=" scaleY(-1)"),e===Ie?(n.style.height=this.smallDashSize+"px",n.style.backgroundImage="linear-gradient(to left, "+this.color+" 1px, rgba(0, 0, 0, 0) 0px)",n.style.backgroundImage="-moz-linear-gradient(left, "+this.color+" 1px, rgba(0, 0, 0, 0) 0px)",n.style.backgroundImage="-webkit-linear-gradient(left, "+this.color+" 1px, rgba(0, 0, 0, 0) 0px)",a.style.height=this.largeDashSize+"px",a.style.backgroundImage="linear-gradient(to left, "+this.color+" 2px, rgba(0, 0, 0, 0) 0px)",a.style.backgroundImage="-moz-linear-gradient(left, "+this.color+" 2px, rgba(0, 0, 0, 0) 0px)",a.style.backgroundImage="-webkit-linear-gradient(left, "+this.color+" 2px, rgba(0, 0, 0, 0) 0px)"):(n.style.width=this.smallDashSize+"px",n.style.backgroundImage="linear-gradient(to top, "+this.color+" 1px, rgba(0, 0, 0, 0) 0px)",n.style.backgroundImage="-moz-linear-gradient(top, "+this.color+" 1px, rgba(0, 0, 0, 0) 0px)",n.style.backgroundImage="-webkit-linear-gradient(top, "+this.color+" 1px, rgba(0, 0, 0, 0) 0px)",a.style.width=this.largeDashSize+"px",a.style.backgroundImage="linear-gradient(to top, "+this.color+" 2px, rgba(0, 0, 0, 0) 0px)",a.style.backgroundImage="-moz-linear-gradient(top, "+this.color+" 2px, rgba(0, 0, 0, 0) 0px)",a.style.backgroundImage="-webkit-linear-gradient(top, "+this.color+" 2px, rgba(0, 0, 0, 0) 0px)"),t.appendChild(n),t.appendChild(a),{labels:[],large:a,ruler:t,small:n}},t.getScalesInfo=function(e){var t=this,n=function(t,n,a){return t*e*a/n},a=function(e,n){return t.imperialUnits&&"in"===e.unit&&1===n?8:10},r=(this.imperialUnits?Ce.imperial:Ce.metric).find((function(e){var t=e.labelFactors.slice(-1)[0],r=a(e,t);return n(e.conversionFactor,r,t)>2})),i=r.labelFactors.find((function(e){var t=a(r,e);return n(r.conversionFactor,t,e)>2})),o=a(r,i);return{labelFactor:i,largeFactor:o,small:r.conversionFactor*i*e*(1/o),unit:r.unit}},Object(ke.a)(e,[{key:"PixelsPerMillimeter",get:function(){return this.pixelsPerMillimeter},set:function(e){this.pixelsPerMillimeter=e}}]),e}(),je=n(431),Te=n.n(je),_e=function(e){function t(t){var n;return(n=e.call(this,t)||this).onMenuButtonClicked=n.onMenuButtonClicked.bind(Object(d.a)(n)),n.show=!1,n}Object(a.a)(t,e);var n=t.prototype;return n.componentDidMount=function(){},n.componentDidUpdate=function(e){this.props.viewer&&this.attachRuler()},n.attachRuler=function(){var e,t,n,a=this,r=this.props,i=r.viewer,o=r.canvasWorld,l=null==o||null===(e=o.canvases[0])||void 0===e||null===(t=e.canvas)||void 0===t||null===(n=t.__jsonld)||void 0===n?void 0:n.physicalDimensions;if(l&&"http://iiif.io/api/annex/extensions/physdim"===l.profile){var s=1/({cm:10,in:25.4,mm:1}[l.physicalUnits]*l.physicalScale);this.ruler=this.ruler||new Se({viewer:i,show:!0,location:"bottom-left",labelsEvery:1}),this.ruler.PixelsPerMillimeter=s,this.ruler.register(),i.addHandler("tile-loaded",(function(e){a.ruler.updateSize(),a.ruler.refresh(e.tiledImage)})),this.show=!0}},n.onMenuButtonClicked=function(e){this.show?(this.show=!1,this.ruler.hide()):(this.show=!0,this.ruler.show())},n.render=function(){var e=this.props,t=e.show,n=e.classes;return o.a.createElement("div",{className:"MuiPaper-elevation4 "+n.root+" olamalu-physical-ruler"},o.a.createElement(D.a,{onClick:this.onMenuButtonClicked},o.a.createElement(xe.a,{title:t?"show ruler":"hide ruler"})))},t}(i.Component),Fe=[le,[we,{name:"PhysicalRuler",target:"OpenSeadragonViewer",component:Te()((function(){return{root:{borderRadius:25,position:"absolute",top:64,right:8,zIndex:999,display:"flex",backgroundColor:"rgba(255, 255, 255, 0.8)"}}}))(_e),mode:"add"}]],Me=function(){return o.a.createElement(o.a.Fragment,null,o.a.createElement("ul",{className:"main-menu"},[{link:"https://unlocking-miniatures.fitzmuseum.cam.ac.uk/",title:"Home"},{link:"https://unlocking-miniatures.fitzmuseum.cam.ac.uk/collections",title:"Collections"},{link:"https://unlocking-miniatures.fitzmuseum.cam.ac.uk/about",title:"About"},{link:"https://unlocking-miniatures.fitzmuseum.cam.ac.uk/blog",title:"Blog"}].map((function(e){return o.a.createElement("li",{key:e.link},o.a.createElement("a",{href:e.link},e.title))}))))},Pe=o.a.createElement("h4",null,"Quick links"),De=o.a.createElement("h4",null,"Contact"),Re=o.a.createElement("div",{className:"footer--copyright-codes"},o.a.createElement("div",null,"Content: ",o.a.createElement("a",{href:"https://creativecommons.org/licenses/by-nc/4.0/",target:"__blank",rel:"noopener"},"CC-BY-NC")),o.a.createElement("div",null,"Metadata: ",o.a.createElement("a",{href:"https://creativecommons.org/licenses/by-nc/4.0/",target:"__blank",rel:"noopener"},"CC-BY-NC")),o.a.createElement("div",null,"Images: ",o.a.createElement("a",{href:"https://creativecommons.org/licenses/by-nc-nd/4.0/",target:"__blank",rel:"noopener"},"CC-BY-NC-ND")),o.a.createElement("div",null,"Code: ",o.a.createElement("a",{href:"https://www.gnu.org/licenses/gpl-3.0.en.html",target:"__blank",rel:"noopener"},"GPL-V3"))),Ne=o.a.createElement("div",{className:"footer--copyright"},o.a.createElement("span",null,"© 2022 The University of Cambridge"),o.a.createElement("span",null,o.a.createElement("a",{target:"__blank",rel:"noopener",href:"https://www.information-compliance.admin.cam.ac.uk/data-protection/general-data"},"Privacy policy")),o.a.createElement("span",null,"Website by ",o.a.createElement("a",{href:"https://www.olamalu.com/",target:"__blank",rel:"noopener"},"www.olamalu.com"))),Be=function(){var e={quickLinks:[{link:"https://unlocking-miniatures.fitzmuseum.cam.ac.uk/",title:"Home"},{link:"https://unlocking-miniatures.fitzmuseum.cam.ac.uk/collections",title:"Collections"},{link:"https://unlocking-miniatures.fitzmuseum.cam.ac.uk/about",title:"About"},{link:"https://unlocking-miniatures.fitzmuseum.cam.ac.uk/blog",title:"Blog"}],contact:[{line:"portraitminiatures [at] fitzmuseum.cam.ac.uk"},{line:"The Fitzwilliam Museum"},{line:"University of Cambridge"}]};return o.a.createElement("div",{className:"footer"},o.a.createElement("div",{className:"footer--main"},o.a.createElement("div",{className:"footer--quick-links"},Pe,o.a.createElement("ul",null,e.quickLinks.map((function(e){return o.a.createElement("li",null,o.a.createElement("a",{href:null==e?void 0:e.link},e.title))})))),o.a.createElement("div",{className:"footer--contact"},De,o.a.createElement("ul",null,e.contact.map((function(e){return o.a.createElement("li",null,null==e?void 0:e.line)})))),Re),Ne)},He=n(432),Ae=(n(654),[{element:'button[role="tab"][aria-label="Annotations"]',title:"Annotations",intro:"View annotations and open micrograph images."},{element:'button[role="tab"][aria-label="Layers"]',title:"Layers",intro:"Control opacity of individual layers."},{element:'button[role="tab"][aria-label="Layers Curtain"]',title:"Layers Curtain",intro:"View layers side be side with the curtain slider."},{element:".olamalu-layers-curtain-orientation",title:"Orientation",intro:"Click to change the orientation of the curtain from vertical to horizontal."},{element:".olamalu-physical-ruler",title:"Ruler",intro:"Click to turn on and off the ruler."},{element:".olamalu-navigation-controls",title:"Navigation controls",intro:"Zoom in and out with these controls, mouse scroll or touch input."},{element:'#addBtn[aria-label="Add resource"]',title:"Add resource",intro:"Add and compare another resource."},{element:'button[aria-label="Toggle sidebar"]',title:"Collapse sidebar",intro:"Hide the sidebar to allow for unobstructed viewing."}]),Ve=null;var Ge=o.a.createElement(o.a.Fragment,null),Ue=function(e){function t(){return e.apply(this,arguments)||this}Object(a.a)(t,e);var n=t.prototype;return n.componentDidMount=function(){Ve=setInterval((function(){Ve&&document.querySelector(Ae[0].element)&&(clearInterval(Ve),Ve=null,Object(He.a)().setOptions({steps:Ae}).start())}),2e3)},n.render=function(){return Ge},t}(i.Component);n(655);function We(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */We=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,a="function"==typeof Symbol?Symbol:{},r=a.iterator||"@@iterator",i=a.asyncIterator||"@@asyncIterator",o=a.toStringTag||"@@toStringTag";function l(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(e){l=function(e,t,n){return e[t]=n}}function s(e,t,n,a){var r=t&&t.prototype instanceof d?t:d,i=Object.create(r.prototype),o=new k(a||[]);return i._invoke=function(e,t,n){var a="suspendedStart";return function(r,i){if("executing"===a)throw new Error("Generator is already running");if("completed"===a){if("throw"===r)throw i;return I()}for(n.method=r,n.arg=i;;){var o=n.delegate;if(o){var l=w(o,n);if(l){if(l===u)continue;return l}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===a)throw a="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);a="executing";var s=c(e,t,n);if("normal"===s.type){if(a=n.done?"completed":"suspendedYield",s.arg===u)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(a="completed",n.method="throw",n.arg=s.arg)}}}(e,n,o),i}function c(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=s;var u={};function d(){}function p(){}function m(){}var h={};l(h,r,(function(){return this}));var f=Object.getPrototypeOf,v=f&&f(f(C([])));v&&v!==t&&n.call(v,r)&&(h=v);var y=m.prototype=d.prototype=Object.create(h);function g(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function b(e,t){var a;this._invoke=function(r,i){function o(){return new t((function(a,o){!function a(r,i,o,l){var s=c(e[r],e,i);if("throw"!==s.type){var u=s.arg,d=u.value;return d&&"object"==typeof d&&n.call(d,"__await")?t.resolve(d.__await).then((function(e){a("next",e,o,l)}),(function(e){a("throw",e,o,l)})):t.resolve(d).then((function(e){u.value=e,o(u)}),(function(e){return a("throw",e,o,l)}))}l(s.arg)}(r,i,a,o)}))}return a=a?a.then(o,o):o()}}function w(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,w(e,t),"throw"===t.method))return u;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return u}var a=c(n,e.iterator,t.arg);if("throw"===a.type)return t.method="throw",t.arg=a.arg,t.delegate=null,u;var r=a.arg;return r?r.done?(t[e.resultName]=r.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,u):r:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,u)}function E(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function x(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function k(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(E,this),this.reset(!0)}function C(e){if(e){var t=e[r];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var a=-1,i=function t(){for(;++a<e.length;)if(n.call(e,a))return t.value=e[a],t.done=!1,t;return t.value=void 0,t.done=!0,t};return i.next=i}}return{next:I}}function I(){return{value:void 0,done:!0}}return p.prototype=m,l(y,"constructor",m),l(m,"constructor",p),p.displayName=l(m,o,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===p||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,m):(e.__proto__=m,l(e,o,"GeneratorFunction")),e.prototype=Object.create(y),e},e.awrap=function(e){return{__await:e}},g(b.prototype),l(b.prototype,i,(function(){return this})),e.AsyncIterator=b,e.async=function(t,n,a,r,i){void 0===i&&(i=Promise);var o=new b(s(t,n,a,r),i);return e.isGeneratorFunction(n)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},g(y),l(y,o,"Generator"),l(y,r,(function(){return this})),l(y,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var a=t.pop();if(a in e)return n.value=a,n.done=!1,n}return n.done=!0,n}},e.values=C,k.prototype={constructor:k,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function a(n,a){return o.type="throw",o.arg=e,t.next=n,a&&(t.method="next",t.arg=void 0),!!a}for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r],o=i.completion;if("root"===i.tryLoc)return a("end");if(i.tryLoc<=this.prev){var l=n.call(i,"catchLoc"),s=n.call(i,"finallyLoc");if(l&&s){if(this.prev<i.catchLoc)return a(i.catchLoc,!0);if(this.prev<i.finallyLoc)return a(i.finallyLoc)}else if(l){if(this.prev<i.catchLoc)return a(i.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return a(i.finallyLoc)}}}},abrupt:function(e,t){for(var a=this.tryEntries.length-1;a>=0;--a){var r=this.tryEntries[a];if(r.tryLoc<=this.prev&&n.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var i=r;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var o=i?i.completion:{};return o.type=e,o.arg=t,i?(this.method="next",this.next=i.finallyLoc,u):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),u},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),x(n),u}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var a=n.completion;if("throw"===a.type){var r=a.arg;x(n)}return r}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:C(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),u}},e}function Ze(){return(Ze=Object(r.a)(We().mark((function e(t){var n,a,r,i;return We().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=[],Array.isArray(t)&&t.forEach((function(e){n.push({manifestId:e})})),e.next=4,fetch("https://unlocking-miniatures.fitz.ms/items/miniatures/?fields%5B%5D=accession_number");case 4:return a=e.sent,e.next=7,a.json();case 7:r=e.sent.data,i=r.map((function(e){return{manifestId:"https://miniatures-iiif.fitzmuseum.cam.ac.uk/"+e.accession_number+"/manifest.json"}})),n.length<1&&n.push(i[0]),s.a.viewer(Object.assign({},c,{windows:n,catalog:i}),Fe);case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var qe=o.a.createElement(Me,null),Ye=o.a.createElement(Be,null),Je=o.a.createElement(Ue,null),Xe=function(e){function t(){return e.apply(this,arguments)||this}Object(a.a)(t,e);var n=t.prototype;return n.componentDidMount=function(){!function(e){Ze.apply(this,arguments)}(new URLSearchParams(document.location.search).getAll("manifestId[]"))},n.render=function(){return o.a.createElement(o.a.Fragment,null,qe,o.a.createElement("div",{className:"main-content"},o.a.createElement("div",{id:c.id})),Ye,Je)},t}(i.Component);Object(l.render)(o.a.createElement(Xe,null),document.querySelector("#app"))}},[[517,2,0]]]);
//# sourceMappingURL=app.7ccd06d6.js.map